pluginFn['/js/plugins/v2/bpmn2.js'] = function(lucid, window) {
	(function(){function V(){return lucid.plugin.getProperty(null,"Version")||0}function fa(c,e,b){return 1<V()?b(c):e(c)}function ga(){var c=J();return c?!!lucid.plugin.getProperty(c,"selectedRow",!0)&&lucid.plugin.getProperty(c,"Fields")<ha:!1}function W(c){var e=lucid.plugin.getProperty(c,"BoundingBox");return lucid.plugin.getProperty(c,"rowHeights",!0).reduce(function(b,d,a){return b.concat(1===a?[lucid.plugin.getProperty(c,"midSectionHeight",!0),d]:d)},[]).map(function(b,d,a){if(1!==d)return{x:e.x,
y:e.y+a.slice(0,d).reduce(function(a,b){return a+b},0),w:e.w,h:b}}).filter(function(b){return void 0!==b})}function ia(c,e){return lucid.array.findIndex(W(c),function(b){return lucid.math.Point.inBox(e,b)})}function ra(c,e,b){e!==b&&lucid.plugin.getProperty(c,"fieldNames",!0).forEach(function(d){var a=lucid.plugin.getProperty(c,d+e);if(e<b)for(var f=e;f<b;f++)lucid.plugin.setProperty(c,d+f,lucid.plugin.getProperty(c,d+(f+1)));else if(e>b)for(f=e;f>b;f--)lucid.plugin.setProperty(c,d+f,lucid.plugin.getProperty(c,
d+(f-1)));lucid.plugin.setProperty(c,d+b,a)})}function ja(c,e){var b=lucid.plugin.getProperty(c,"selectedRow",!0);if(b){var d=e?b+1:b,a=lucid.plugin.getProperty(c,"Fields")+1,b=lucid.plugin.getProperty(c,"fieldNames",!0);b.forEach(function(b){for(var e=a;0<e;e--)e>d?lucid.plugin.setProperty(c,b+e,lucid.plugin.getProperty(c,b+(e-1))):e===d&&lucid.plugin.setProperty(c,b+e,b)});lucid.plugin.setProperty(c,"Fields",a);lucid.plugin.setPropertyIfChanged(c,"selectedRow",d,!0);lucid.text.isEditorActive()&&
lucid.plugin.editBlockTextArea(c,b[0]+d)}}function sa(c){var e=lucid.plugin.getProperty(c,"selectedRow",!0);if(e){var b=lucid.plugin.getProperty(c,"Fields");lucid.plugin.getProperty(c,"fieldNames",!0).forEach(function(d){for(var a=1;a<b;a++)a>=e&&lucid.plugin.setProperty(c,d+a,lucid.plugin.getProperty(c,d+(a+1)))});lucid.plugin.setProperty(c,"Fields",b-1);lucid.plugin.setProperty(c,"selectedRow",null,!0);lucid.text.blurEditor()}}function L(c){function e(a,e){var k=lucid.plugin.getProperty(a,e);if(k&&
k.Block==c){for(var h=k.LinkX,k=k.LinkY,l=0,m=0;m<d.length;m++)Math.abs(d[m]-k)<Math.abs(d[l]-k)&&(l=m);0!=h&&1!=h||b.push({lineId:a,prop:e,field:l})}}var b=[];lucid.plugin.getProperty(c,"Fields");var d=[],a=lucid.plugin.getProperty(c,"linkPoints",!0)[0].y;d[0]=a;lucid.array.forEach(lucid.plugin.getConnectedLines(c),function(a){e(a,"Endpoint1");e(a,"Endpoint2")});lucid.plugin.setProperty(c,"lastLinesToFieldMap",b,!0);return b}function X(c,e,b){e=e||lucid.plugin.getProperty(c,"lastLinesToFieldMap",
!0)||[];b=b||{};0<e.length&&(lucid.array.forEach(e,function(d){var a=d.lineId,f=d.prop;d=d.field;var e=b[d]||d;d=lucid.plugin.getProperty(a,f);"delete"==e?(d.LinkX=.5,d.LinkY=0):(e=lucid.plugin.getProperty(c,"linkPoints",!0)[0].y,d.LinkY!=e&&(d.LinkY=e));lucid.plugin.setProperty(a,f,d)}),lucid.plugin.setProperty(c,"lastLinesToFieldMap",null,!0))}function ka(c){return{className:c?"BPMNAdvancedPoolBlockRotated":"BPMNAdvancedPoolBlock",name:"Pool (White Box)",defaultSize:{w:640,h:700},container:!0,disabledPropertyControls:["FlipX",
"FlipY"],rLock:!0,hLock:!0,vLock:!0,isTextRotateDisabled:!0,searchKeywords:["bpmn","container","pool","lane"],beforeCreate:function(c,b){var d=lucid.plugin.getChildren(c,function(a){return(a=lucid.plugin.getBlockClassName(a))&&("BPMNAdvancedPoolBlock"==a||"BPMNAdvancedPoolBlockRotated"==a)}),a=b.BoundingBox,f=b.Rotation||0,g;for(g in d){var k=d[g],h=lucid.plugin.getProperty(k,"BoundingBox"),l=lucid.plugin.getProperty(k,"Rotation")||0;if(!(0==l&&0!=f||0!=l&&0==f)){var m=lucid.math.Box.rotate(a,f),
p=lucid.math.Box.rotate(h,l);if(lucid.math.Box.overlap(m,p)){var m=lucid.plugin.getProperty(k,"Lanes"),p=h.w*m[m.length-1].p,n=h.w+p,q=[],r=[];for(g=0;g<m.length;g++){var t={p:h.w*m[g].p/n,tid:m[g].tid};q.push(t);r.push(t.tid)}for(;lucid.array.contains(r,g);)g++;q.push({p:p/n,tid:parseInt(g)});if(50>=q.length&&0<q.length)return lucid.plugin.setProperty(k,"Lanes",q),0!=l&&(h.x+=(h.w-n)/2,h.y-=(h.w-n)/2),h.w=n,lucid.plugin.setProperty(k,"BoundingBox",h),!1}}}return!0},getLinkPoints:function(c){var b=
lucid.plugin.getProperty(c,"Lanes"),d=0,a=[];if(lucid.plugin.getProperty(c,"Vertical"))for(c=0;c<b.length;c++){var f=d+b[c].p/2;a.push({x:f,y:0});d+=b[c].p}else for(c=b.length-1;0<=c;c--)f=d+b[c].p/2,a.push({x:f,y:0}),d+=b[c].p;return a},spatialControls:function(c){function b(){var a=lucid.plugin.getProperty(c,"Lanes"),b=lucid.plugin.getProperty(c,"Vertical");return a?b?a:a.reverse():null}function d(a,b){var d=lucid.plugin.getProperty(c,"Vertical");b.h&&(d||(a.x-=(a.h-b.h)/2,a.y+=(a.h-b.h)/2),a.h=
b.h);b.w&&(d||(a.x+=(a.w-b.w)/2,a.y-=(a.w-b.w)/2),a.w=b.w);lucid.plugin.setProperty(c,"BoundingBox",a)}function a(a){var b=0;lucid.plugin.getProperty(c,"Vertical")||a--;for(var d=0;d<=a;d++)b+=g[d].p;return b}function f(f){return{logAction:"chart.viewport.selection.spatialControls.bpmn2.swimlaneWidth",location:function(){g=b();var d=lucid.plugin.getProperty(c,"BoundingBox");return{x:d.x+d.w*a(f)-10,y:d.y,w:20,h:d.h}},moved:function(k){g=b();var h=lucid.plugin.getProperty(c,"BoundingBox"),n=lucid.plugin.getProperty(c,
"Vertical"),q=a(f),r=h.x+q*h.w;k=n?k.x-r:r-k.x;if(!n)var t=lucid.math.Box.rotate(h,lucid.plugin.getProperty(c,"Rotation")).y+(1-q)*h.w;for(var q=h.w+k,z=0;z<g.length;z++)g[z].p=z==f?(g[z].p*h.w+k)/q:g[z].p*h.w/q;for(var Y=lucid.plugin.getContained(c),z=0;z<Y.length;z++){var C=lucid.plugin.getProperty(Y[z],"BoundingBox");C&&(n?C.x+.01>=r&&(C.x+=k):C.y+.01>=t&&(C.y+=k),lucid.plugin.setProperty(Y[z],"BoundingBox",C))}d(h,{w:q});h=g;n=lucid.plugin.getProperty(c,"Vertical");lucid.plugin.setProperty(c,
"Lanes",n?h:h.reverse())},path:function(){g=b();var d=lucid.plugin.getProperty(c,"BoundingBox"),k=lucid.plugin.getProperty(c,"Vertical");return[{x:k?d.x+d.w*a(f-1)+20:d.x+d.w*a(f+1)-20,y:d.y+d.h/2},{x:k?1E8:-1E8,y:d.y+d.h/2}]},cursor:function(){return lucid.plugin.getProperty(c,"Rotation")?"s-resize":"e-resize"},snap:!0,color:"none"}}var g=b(),k=[];if(g){for(var h=0;h<g.length;h++)k.push(f(h));k.push({logAction:"chart.viewport.selection.spatialControls.bpmn2.swimlaneHeight",location:function(){var a=
lucid.plugin.getProperty(c,"BoundingBox");return{x:a.x,y:a.y+a.h-10,w:a.w,h:20}},moved:function(a){var b=lucid.plugin.getProperty(c,"BoundingBox");d(b,{h:b.h-(b.y+b.h-a.y)})},path:function(){g=b();var a=lucid.plugin.getProperty(c,"BoundingBox");return[{x:a.x+a.w/2,y:a.y+20+lucid.plugin.getProperty(c,"titleHeight",!0)||40},{x:a.x+a.w/2,y:1E8}]},cursor:function(){return lucid.plugin.getProperty(c,"Vertical")?"s-resize":"e-resize"},snap:!0,color:"none"})}return k},onCreate:function(c){B();lucid.plugin.editBlockTextArea(c,
"MainText")},onInit:function(e){var b=40,d=null,a=function(a,b){var d=function(a,b){var d=lucid.plugin.getProperty(e,"Rotation")||0,c=lucid.math.Box.rotate(b,d),d=lucid.plugin.getContained(e),f={x:c.x+c.w/2,y:c.y+c.h/2};lucid.array.forEach(d,function(b){var d=lucid.plugin.getProperty(b,"BoundingBox"),e=lucid.math.Point.rotate({x:d.x,y:d.y},f,"v"===a?Math.PI/2:-Math.PI/2),d={x:"v"===a?e.x-2*(e.x-(c.x+c.w/2)):e.x,y:"h"===a?e.y-2*(e.y-(c.y+c.h/2)):e.y,w:d.w,h:d.h,data:d.data};d.x-=(c.w-c.h)/2;d.y-=(c.h-
c.w)/2;lucid.plugin.setProperty(b,"BoundingBox",d)})},c=lucid.plugin.getProperty(e,"VerticalText"),f=lucid.plugin.getProperty(e,"BoundingBox");null!=a&&(d(b?"v":"h",f),(!a&&b||a&&!b)&&lucid.plugin.setProperty(e,"VerticalText",c?0:1));lucid.plugin.setProperty(e,"Rotation",b?0:-Math.PI/2);f.x+=b?(f.w-f.h)/2:-(f.w-f.h)/2;f.y+=b?(f.h-f.w)/2:-(f.h-f.w)/2;lucid.plugin.setProperty(e,"BoundingBox",f)},f=function(a){var c=lucid.plugin.getProperty(e,"VerticalText"),f=lucid.plugin.getProperty(e,"Vertical"),
g=lucid.plugin.getProperty(e,"BoundingBox"),p=lucid.plugin.getProperty(e,"titleHeight",!0),n=lucid.plugin.getProperty(e,"mainTitleHeight",!0),q=g.h/3,r=!1;b=40;var t;t={x:0,y:0,w:g.w,h:1E4};t=lucid.text.getSize(e,"MainText",t);t=Math.min(q,Math.round(Math.max(b,t.h+15)));t!=n&&(lucid.plugin.setProperty(e,"mainTitleHeight",t,!0),r=!0);for(n=0;n<a.length;n++)t={x:0,y:0,w:f==c?q:g.w*a[n].p,h:1E4},t=lucid.text.getSize(e,"Lane_"+a[n].tid,t),b=f==c?Math.min(q,Math.round(Math.max(b,t.w+15))):Math.min(q,
Math.round(Math.max(b,t.h+15))),lucid.plugin.updateBlockTextArea(e,"Lane_"+a[n].tid,{rotation:c!=!f?Math.PI/2:0});d=lucid.text.getStyle(e,"Lane_"+a[a.length-1].tid);b!=p&&(lucid.plugin.setProperty(e,"titleHeight",b,!0),r=!0);r&&lucid.plugin.refreshBlockView(e)};lucid.plugin.addBlockTextArea(e,{id:"MainText",value:lucid.text.restyle("Pool",d),getBoundingBox:function(a,b){var d=lucid.plugin.getProperty(e,"Lanes");f(d);return{x:a.x,y:a.y,w:a.w,h:lucid.plugin.getProperty(e,"mainTitleHeight",!0)}}});var g=
function(a){lucid.plugin.addBlockTextArea(e,{id:"Lane_"+a,value:lucid.text.restyle("Lane",d),getBoundingBox:function(a){return function(b){var d=lucid.plugin.getProperty(e,"Lanes");f(d);var c;for(c=0;c<d.length&&d[c].tid!==a;c++);if(c>=d.length)return null;var g=lucid.plugin.getProperty(e,"Vertical"),k=0;if(g)for(var r=0;r<c;r++)k+=b.w*d[r].p;else for(r=d.length-1;r>c;r--)k+=b.w*d[r].p;b={x:b.x+k,y:b.y+lucid.plugin.getProperty(e,"mainTitleHeight",!0),w:b.w*d[c].p,h:lucid.plugin.getProperty(e,"titleHeight",
!0)};d=lucid.plugin.getProperty(e,"VerticalText");g==d&&(b=lucid.math.Box.rotate(b,Math.PI/2));return b}}(a)})};lucid.plugin.registerProperty(e,"Lanes",[{p:.5,tid:0},{p:.5,tid:1}],null,function(a,b){if(a!=b){var d=lucid.plugin.getBlockTextAreas(e),c=d.indexOf("MainText");0<=c&&d.splice(c,1);for(var p=["MainText"],n=0;n<b.length;n++){var q="Lane_"+b[n].tid,c=d.indexOf(q);0>c?g(b[n].tid):d.splice(c,1);p.push(q)}for(n=0;n<d.length;n++)lucid.plugin.deleteBlockTextArea(e,d[n]);lucid.plugin.setBlockTextAreasOrder(e,
p);f(b)}});lucid.plugin.registerProperty(e,"VerticalText",c?1:0,null,function(a,b){if(a!=b){for(var d=lucid.plugin.getProperty(e,"Lanes"),c=lucid.plugin.getProperty(e,"Vertical"),g=0;g<d.length;g++)lucid.plugin.updateBlockTextArea(e,"Lane_"+d[g].tid,{rotation:c&&!b||!c&&b?0:Math.PI/2});f(d)}});lucid.plugin.registerProperty(e,"Vertical",c?0:1,null,function(b,d){b!=d&&a(b,d)})},getRenderData:function(c,b){"sample"===b&&(c.LineWidth=1);var d=c.Lanes,a=c.Vertical||!1,f=c.BoundingBox,g=c.mainTitleHeight||
40;if(40>f.h||"sample"==b)g=f.h/5;var k=[{FillColor:c.FillColor,Actions:[{Action:"move",x:f.x,y:f.y},{Action:"line",x:f.x+f.w,y:f.y},{Action:"line",x:f.x+f.w,y:f.y+g},{Action:"line",x:f.x,y:f.y+g},{Action:"close"}]},{StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:f.x,y:f.y+f.h},{Action:"line",x:f.x,y:f.y},{Action:"line",x:f.x+f.w,y:f.y},{Action:"line",x:f.x+f.w,y:f.y+f.h},{Action:"close"},{Action:"move",x:f.x,y:f.y+g},{Action:"line",x:f.x+f.w,y:f.y+g}]}],h=function(a){k[1].Actions.push({Action:"move",
x:a.x,y:a.y+g});k[1].Actions.push({Action:"line",x:a.x,y:a.y+a.h})},l=f.w;if(a)for(a=0;a<d.length;a++)f.w=l*d[a].p,0<a&&h(f),f.x+=l*d[a].p;else for(a=d.length-1;0<=a;a--)f.w=l*d[a].p,a<d.length-1&&h(f),f.x+=l*d[a].p;return k}}}function M(c,e,b,d){var a=1;d&&(a=.4);b={w:30*a,h:30*a,x:c.BoundingBox.x+c.BoundingBox.w/2+("left"==b?-35*a-.02*c.BoundingBox.w:"right"==b?5*a+.02*c.BoundingBox.w:-15*a),y:c.BoundingBox.y+c.BoundingBox.h+(-40*a-.01*c.BoundingBox.h)};a=[];switch(e){case w.SUB_PROCESS:a=Z(c,b);
break;case w.LOOP:a=[{StrokeColor:c.LineColor,LineWidth:c.LineWidth+1,Actions:[{Action:"move",x:b.x+.05*b.w,y:b.y+.95*b.h},{Action:"line",x:b.x+.25*b.w,y:b.y+.95*b.h},{Action:"line",x:b.x+.25*b.w,y:b.y+.75*b.h},{Action:"move",x:b.x+.25*b.w,y:b.y+.95*b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y,b.w,b.h,8*Math.PI/12,30*Math.PI/12)}]}];break;case w.PARALLEL_MI:a=aa(c,b);break;case w.SEQUENTIAL_MI:a=[{FillColor:"#000000",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,
Actions:[{Action:"move",x:b.x,y:b.y},{Action:"line",x:b.x+b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+.225*b.h},{Action:"line",x:b.x,y:b.y+.225*b.h},{Action:"close"},{Action:"move",x:b.x,y:b.y+.3825*b.h},{Action:"line",x:b.x+b.w,y:b.y+.3825*b.h},{Action:"line",x:b.x+b.w,y:b.y+.6175*b.h},{Action:"line",x:b.x,y:b.y+.6175*b.h},{Action:"close"},{Action:"move",x:b.x,y:b.y+.775*b.h},{Action:"line",x:b.x+b.w,y:b.y+.775*b.h},{Action:"line",x:b.x+b.w,y:b.y+b.h},{Action:"line",x:b.x,y:b.y+b.h},{Action:"close"}]}];
break;case w.AD_HOC:a=[{FillColor:"#000000",StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y+.8*b.h},{Action:"curve",Control:[{x1:b.x,y1:b.y+.7*b.h,x2:b.x+.02*b.w,y2:b.y,x3:b.x+.5*b.w,y3:b.y+.4*b.h}]},{Action:"curve",Control:[{x1:b.x+.5*b.w,y1:b.y+.4*b.h,x2:b.x+.88*b.w,y2:b.y+.65*b.h,x3:b.x+.9*b.w,y3:b.y+.2*b.h}]},{Action:"line",x:b.x+b.w,y:b.y+.2*b.h},{Action:"curve",Control:[{x1:b.x+b.w,y1:b.y+.2*b.h,x2:b.x+.98*b.w,y2:b.y+b.h,x3:b.x+.5*b.w,y3:b.y+.6*b.h}]},{Action:"curve",
Control:[{x1:b.x+.5*b.w,y1:b.y+.6*b.h,x2:b.x+.12*b.w,y2:b.y+.35*b.h,x3:b.x+.1*b.w,y3:b.y+.8*b.h}]},{Action:"close"}]}];break;case w.COMPENSATION:a=la(c,0,d,b)}return a}function ta(c,e,b){var d=1;"sample"==b&&(d=.4);var a={w:35*d,h:35*d,x:c.BoundingBox.x+.01*c.BoundingBox.w+7*d,y:c.BoundingBox.y+.01*c.BoundingBox.h+7*d},f=[];switch(e){case v.SEND:f=K(c,1,a);break;case v.RECEIVE:f=K(c,0,a);break;case v.USER:f=[{FillColor:"#f4f6f7",StrokeColor:"#000000",LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",
x:a.x+.024623880092409983*a.w,y:a.y+1*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+1*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+.6761965025310631*a.h},{Action:"curve",Control:[{x1:a.x+1*a.w,y1:a.y+.6761965025310631*a.h,x2:a.x+.9053361131458838*a.w,y2:a.y+.51449608835711*a.h,x3:a.x+.7131909618527075*a.w,y3:a.y+.4627818683847217*a.h}]},{Action:"line",x:a.x+.33847974305516426*a.w,y:a.y+.4627818683847217*a.h},{Action:"curve",Control:[{x1:a.x+.15929452865273*a.w,y1:a.y+.5180050621260931*a.h,x2:a.x+.02124302699047725*
a.w,y2:a.y+.700356649792913*a.h,x3:a.x+.02124302699047725*a.w,y3:a.y+.700356649792913*a.h}]},{Action:"line",x:a.x+.024623880092409983*a.w,y:a.y+1*a.h},{Action:"close"}]},{FillColor:"rgba(0, 0, 0, 0)",StrokeColor:"#000000",LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:a.x+.024623880092409983*a.w,y:a.y+1*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+1*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+.6761965025310631*a.h},{Action:"curve",Control:[{x1:a.x+1*a.w,y1:a.y+.6761965025310631*a.h,x2:a.x+.9053361131458838*
a.w,y2:a.y+.51449608835711*a.h,x3:a.x+.7131909618527075*a.w,y3:a.y+.4627818683847217*a.h}]},{Action:"line",x:a.x+.33847974305516426*a.w,y:a.y+.4627818683847217*a.h},{Action:"curve",Control:[{x1:a.x+.15929452865273*a.w,y1:a.y+.5180050621260931*a.h,x2:a.x+.02124302699047725*a.w,y2:a.y+.700356649792913*a.h,x3:a.x+.02124302699047725*a.w,y3:a.y+.700356649792913*a.h}]},{Action:"line",x:a.x+.024623880092409983*a.w,y:a.y+1*a.h},{Action:"close"}]},{FillColor:"rgba(0, 0, 0, 0)",StrokeColor:"#000000",LineWidth:c.LineWidth,
NoRounding:!0,Actions:[{Action:"move",x:a.x+.2370541499971826*a.w,y:a.y+.8240335941095259*a.h},{Action:"line",x:a.x+.2370541499971826*a.w,y:a.y+.9828002761159688*a.h}]},{FillColor:"rgba(0, 0, 0, 0)",StrokeColor:"#000000",LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:a.x+.8005296669859695*a.w,y:a.y+.8274275195582145*a.h},{Action:"line",x:a.x+.8005296669859695*a.w,y:a.y+.9931546249424759*a.h}]},{FillColor:"#020202",StrokeColor:"#000000",LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",
x:a.x+.7469431453203359*a.w,y:a.y+.24534054302807176*a.h},{Action:"curve",Control:[{x1:a.x+.7469431453203359*a.w,y1:a.y+.12166359871145879*a.h,x2:a.x+.6483349298472981*a.w,y2:a.y+.021571560055223166*a.h,x3:a.x+.527187693694709*a.w,y3:a.y+.021571560055223166*a.h}]},{Action:"curve",Control:[{x1:a.x+.40604045754211976*a.w,y1:a.y+.021571560055223166*a.h,x2:a.x+.30799571758607086*a.w,y2:a.y+.12166359871145876*a.h,x3:a.x+.30799571758607086*a.w,y3:a.y+.24534054302807176*a.h}]},{Action:"curve",Control:[{x1:a.x+
.30799571758607086*a.w,y1:a.y+.36901748734468476*a.h,x2:a.x+.40604045754211976*a.w,y2:a.y+.46968476760239297*a.h,x3:a.x+.527187693694709*a.w,y3:a.y+.46968476760239297*a.h}]},{Action:"curve",Control:[{x1:a.x+.6483349298472981*a.w,y1:a.y+.46968476760239297*a.h,x2:a.x+.7469431453203359*a.w,y2:a.y+.36901748734468476*a.h,x3:a.x+.7469431453203359*a.w,y3:a.y+.24534054302807176*a.h}]},{Action:"close"}]},{FillColor:"rgba(0, 0, 0, 0)",StrokeColor:"#000000",LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",
x:a.x+.7469431453203359*a.w,y:a.y+.24534054302807176*a.h},{Action:"curve",Control:[{x1:a.x+.7469431453203359*a.w,y1:a.y+.12166359871145879*a.h,x2:a.x+.6483349298472981*a.w,y2:a.y+.021571560055223166*a.h,x3:a.x+.527187693694709*a.w,y3:a.y+.021571560055223166*a.h}]},{Action:"curve",Control:[{x1:a.x+.40604045754211976*a.w,y1:a.y+.021571560055223166*a.h,x2:a.x+.30799571758607086*a.w,y2:a.y+.12166359871145876*a.h,x3:a.x+.30799571758607086*a.w,y3:a.y+.24534054302807176*a.h}]},{Action:"curve",Control:[{x1:a.x+
.30799571758607086*a.w,y1:a.y+.36901748734468476*a.h,x2:a.x+.40604045754211976*a.w,y2:a.y+.46968476760239297*a.h,x3:a.x+.527187693694709*a.w,y3:a.y+.46968476760239297*a.h}]},{Action:"curve",Control:[{x1:a.x+.6483349298472981*a.w,y1:a.y+.46968476760239297*a.h,x2:a.x+.7469431453203359*a.w,y2:a.y+.36901748734468476*a.h,x3:a.x+.7469431453203359*a.w,y3:a.y+.24534054302807176*a.h}]},{Action:"close"}]},{FillColor:"#f0eff0",StrokeColor:"#000000",LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",
x:a.x+.3265904096467009*a.w,y:a.y+.29366083755177175*a.h},{Action:"curve",Control:[{x1:a.x+.3265904096467009*a.w,y1:a.y+.29366083755177175*a.h,x2:a.x+.4404124640784358*a.w,y2:a.y+.19356879889553613*a.h,x3:a.x+.5440919592043726*a.w,y3:a.y+.21887942936033136*a.h}]},{Action:"curve",Control:[{x1:a.x+.6477714543303094*a.w,y1:a.y+.24476530142659922*a.h,x2:a.x+.7317856539133375*a.w,y2:a.y+.19069259088817306*a.h,x3:a.x+.7317856539133375*a.w,y3:a.y+.19069259088817306*a.h}]},{Action:"curve",Control:[{x1:a.x+
.7413647377021468*a.w,y1:a.y+.2602968246663599*a.h,x2:a.x+.733419732912605*a.w,y2:a.y+.34543258168430746*a.h,x3:a.x+.672564377077816*a.w,y3:a.y+.42136447307869307*a.h}]},{Action:"curve",Control:[{x1:a.x+.672564377077816*a.w,y1:a.y+.42136447307869307*a.h,x2:a.x+.7165154674029413*a.w,y2:a.y+.4524275195582145*a.h,x3:a.x+.7165154674029413*a.w,y3:a.y+.4834905660377359*a.h}]},{Action:"curve",Control:[{x1:a.x+.7165154674029413*a.w,y1:a.y+.5145536125172574*a.h,x2:a.x+.7215867470558404*a.w,y2:a.y+.5605729406350668*
a.h,x3:a.x+.6759452301797486*a.w,y3:a.y+.6071099861942016*a.h}]},{Action:"curve",Control:[{x1:a.x+.630247365751958*a.w,y1:a.y+.653762080073631*a.h,x2:a.x+.452808925452189*a.w,y2:a.y+.6588817303267374*a.h,x3:a.x+.402659604440187*a.w,y3:a.y+.6071099861942016*a.h}]},{Action:"curve",Control:[{x1:a.x+.3519468079111962*a.w,y1:a.y+.5553957662218132*a.h,x2:a.x+.3519468079111962*a.w,y2:a.y+.5317533364012886*a.h,x3:a.x+.3519468079111962*a.w,y3:a.y+.49729636447307873*a.h}]},{Action:"curve",Control:[{x1:a.x+
.3519468079111962*a.w,y1:a.y+.4627818683847217*a.h,x2:a.x+.3756127796247252*a.w,y2:a.y+.4455246203405431*a.h,x3:a.x+.402659604440187*a.w,y3:a.y+.4179130234698574*a.h}]},{Action:"curve",Control:[{x1:a.x+.35870851411506166*a.w,y1:a.y+.39375287620800736*a.h,x2:a.x+.30123401138220546*a.w,y2:a.y+.31954670961803955*a.h,x3:a.x+.3265904096467009*a.w,y3:a.y+.29366083755177175*a.h}]},{Action:"close"}]},{FillColor:"rgba(0, 0, 0, 0)",StrokeColor:"#000000",LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",
x:a.x+.3265904096467009*a.w,y:a.y+.29366083755177175*a.h},{Action:"curve",Control:[{x1:a.x+.3265904096467009*a.w,y1:a.y+.29366083755177175*a.h,x2:a.x+.4404124640784358*a.w,y2:a.y+.19356879889553613*a.h,x3:a.x+.5440919592043726*a.w,y3:a.y+.21887942936033136*a.h}]},{Action:"curve",Control:[{x1:a.x+.6477714543303094*a.w,y1:a.y+.24476530142659922*a.h,x2:a.x+.7317856539133375*a.w,y2:a.y+.19069259088817306*a.h,x3:a.x+.7317856539133375*a.w,y3:a.y+.19069259088817306*a.h}]},{Action:"curve",Control:[{x1:a.x+
.7413647377021468*a.w,y1:a.y+.2602968246663599*a.h,x2:a.x+.733419732912605*a.w,y2:a.y+.34543258168430746*a.h,x3:a.x+.672564377077816*a.w,y3:a.y+.42136447307869307*a.h}]},{Action:"curve",Control:[{x1:a.x+.672564377077816*a.w,y1:a.y+.42136447307869307*a.h,x2:a.x+.7165154674029413*a.w,y2:a.y+.4524275195582145*a.h,x3:a.x+.7165154674029413*a.w,y3:a.y+.4834905660377359*a.h}]},{Action:"curve",Control:[{x1:a.x+.7165154674029413*a.w,y1:a.y+.5145536125172574*a.h,x2:a.x+.7215867470558404*a.w,y2:a.y+.5605729406350668*
a.h,x3:a.x+.6759452301797486*a.w,y3:a.y+.6071099861942016*a.h}]},{Action:"curve",Control:[{x1:a.x+.630247365751958*a.w,y1:a.y+.653762080073631*a.h,x2:a.x+.452808925452189*a.w,y2:a.y+.6588817303267374*a.h,x3:a.x+.402659604440187*a.w,y3:a.y+.6071099861942016*a.h}]},{Action:"curve",Control:[{x1:a.x+.3519468079111962*a.w,y1:a.y+.5553957662218132*a.h,x2:a.x+.3519468079111962*a.w,y2:a.y+.5317533364012886*a.h,x3:a.x+.3519468079111962*a.w,y3:a.y+.49729636447307873*a.h}]},{Action:"curve",Control:[{x1:a.x+
.3519468079111962*a.w,y1:a.y+.4627818683847217*a.h,x2:a.x+.3756127796247252*a.w,y2:a.y+.4455246203405431*a.h,x3:a.x+.402659604440187*a.w,y3:a.y+.4179130234698574*a.h}]},{Action:"curve",Control:[{x1:a.x+.35870851411506166*a.w,y1:a.y+.39375287620800736*a.h,x2:a.x+.30123401138220546*a.w,y2:a.y+.31954670961803955*a.h,x3:a.x+.3265904096467009*a.w,y3:a.y+.29366083755177175*a.h}]},{Action:"close"}]}];break;case v.MANUAL:a.y+=7*d;a.h-=14*d;f=[{FillColor:"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,
NoRounding:!0,Actions:[{Action:"move",x:a.x,y:a.y+.9*a.h},{Action:"line",x:a.x,y:a.y+.2*a.h},{Action:"line",x:a.x+.2*a.w,y:a.y},{Action:"line",x:a.x+.57*a.w,y:a.y},{Action:"curve",Control:[{x1:a.x+.6*a.w,y1:a.y,x2:a.x+.58*a.w,y2:a.y+.1*a.h,x3:a.x+.55*a.w,y3:a.y+.19*a.h}]},{Action:"line",x:a.x+.3*a.w,y:a.y+.19*a.h},{Action:"line",x:a.x+.29*a.w,y:a.y+.21*a.h},{Action:"line",x:a.x+.97*a.w,y:a.y+.21*a.h},{Action:"curve",Control:[{x1:a.x+.98*a.w,y1:a.y+.21*a.h,x2:a.x+a.w,y2:a.y+.3*a.h,x3:a.x+.95*a.w,y3:a.y+
.39*a.h}]},{Action:"line",x:a.x+.55*a.w,y:a.y+.39*a.h},{Action:"line",x:a.x+.54*a.w,y:a.y+.41*a.h},{Action:"line",x:a.x+.94*a.w,y:a.y+.41*a.h},{Action:"curve",Control:[{x1:a.x+.94*a.w,y1:a.y+.41*a.h,x2:a.x+.97*a.w,y2:a.y+.5*a.h,x3:a.x+.91*a.w,y3:a.y+.59*a.h}]},{Action:"line",x:a.x+.58*a.w,y:a.y+.59*a.h},{Action:"line",x:a.x+.57*a.w,y:a.y+.61*a.h},{Action:"line",x:a.x+.89*a.w,y:a.y+.61*a.h},{Action:"curve",Control:[{x1:a.x+.89*a.w,y1:a.y+.61*a.h,x2:a.x+.92*a.w,y2:a.y+.7*a.h,x3:a.x+.86*a.w,y3:a.y+.79*
a.h}]},{Action:"line",x:a.x+.56*a.w,y:a.y+.79*a.h},{Action:"line",x:a.x+.55*a.w,y:a.y+.81*a.h},{Action:"line",x:a.x+.83*a.w,y:a.y+.81*a.h},{Action:"curve",Control:[{x1:a.x+.83*a.w,y1:a.y+.81*a.h,x2:a.x+.86*a.w,y2:a.y+.9*a.h,x3:a.x+.81*a.w,y3:a.y+a.h}]},{Action:"line",x:a.x+.1*a.w,y:a.y+a.h},{Action:"close"}]}];break;case v.BUSINESS_RULE:a.y+=4*d;a.h-=8*d;c=2;"sample"==b&&(c=.5);f=[{FillColor:"#b3b1b3",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.022222222222222223*
a.w,y:a.y+.030542433621110927*a.h},{Action:"line",x:a.x+.9944296296296296*a.w,y:a.y+.030542433621110927*a.h},{Action:"curve",Control:[{x1:a.x+.9944296296296296*a.w,y1:a.y+.030542433621110927*a.h,x2:a.x+.9944296296296296*a.w,y2:a.y+.030542433621110927*a.h,x3:a.x+.9944296296296296*a.w,y3:a.y+.030542433621110927*a.h}]},{Action:"line",x:a.x+.9944296296296296*a.w,y:a.y+.2711353640658088*a.h},{Action:"curve",Control:[{x1:a.x+.9944296296296296*a.w,y1:a.y+.2711353640658088*a.h,x2:a.x+.9944296296296296*a.w,
y2:a.y+.2711353640658088*a.h,x3:a.x+.9944296296296296*a.w,y3:a.y+.2711353640658088*a.h}]},{Action:"line",x:a.x+.022222222222222223*a.w,y:a.y+.2711353640658088*a.h},{Action:"curve",Control:[{x1:a.x+.022222222222222223*a.w,y1:a.y+.2711353640658088*a.h,x2:a.x+.022222222222222223*a.w,y2:a.y+.2711353640658088*a.h,x3:a.x+.022222222222222223*a.w,y3:a.y+.2711353640658088*a.h}]},{Action:"line",x:a.x+.022222222222222223*a.w,y:a.y+.030542433621110927*a.h},{Action:"curve",Control:[{x1:a.x+.022222222222222223*
a.w,y1:a.y+.030542433621110927*a.h,x2:a.x+.022222222222222223*a.w,y2:a.y+.030542433621110927*a.h,x3:a.x+.022222222222222223*a.w,y3:a.y+.030542433621110927*a.h}]},{Action:"close"}]},{FillColor:"rgba(0, 0, 0, 0)",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.022222222222222223*a.w,y:a.y+.030542433621110927*a.h},{Action:"line",x:a.x+.9944296296296296*a.w,y:a.y+.030542433621110927*a.h},{Action:"curve",Control:[{x1:a.x+.9944296296296296*a.w,y1:a.y+.030542433621110927*a.h,
x2:a.x+.9944296296296296*a.w,y2:a.y+.030542433621110927*a.h,x3:a.x+.9944296296296296*a.w,y3:a.y+.030542433621110927*a.h}]},{Action:"line",x:a.x+.9944296296296296*a.w,y:a.y+.2711353640658088*a.h},{Action:"curve",Control:[{x1:a.x+.9944296296296296*a.w,y1:a.y+.2711353640658088*a.h,x2:a.x+.9944296296296296*a.w,y2:a.y+.2711353640658088*a.h,x3:a.x+.9944296296296296*a.w,y3:a.y+.2711353640658088*a.h}]},{Action:"line",x:a.x+.022222222222222223*a.w,y:a.y+.2711353640658088*a.h},{Action:"curve",Control:[{x1:a.x+
.022222222222222223*a.w,y1:a.y+.2711353640658088*a.h,x2:a.x+.022222222222222223*a.w,y2:a.y+.2711353640658088*a.h,x3:a.x+.022222222222222223*a.w,y3:a.y+.2711353640658088*a.h}]},{Action:"line",x:a.x+.022222222222222223*a.w,y:a.y+.030542433621110927*a.h},{Action:"curve",Control:[{x1:a.x+.022222222222222223*a.w,y1:a.y+.030542433621110927*a.h,x2:a.x+.022222222222222223*a.w,y2:a.y+.030542433621110927*a.h,x3:a.x+.022222222222222223*a.w,y3:a.y+.030542433621110927*a.h}]},{Action:"close"}]},{FillColor:"#ffffff",
StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.022222222222222223*a.w,y:a.y+.2632350545691481*a.h},{Action:"line",x:a.x+.9944296296296296*a.w,y:a.y+.2632350545691481*a.h},{Action:"curve",Control:[{x1:a.x+.9944296296296296*a.w,y1:a.y+.2632350545691481*a.h,x2:a.x+.9944296296296296*a.w,y2:a.y+.2632350545691481*a.h,x3:a.x+.9944296296296296*a.w,y3:a.y+.2632350545691481*a.h}]},{Action:"line",x:a.x+.9944296296296296*a.w,y:a.y+.9999999999999999*a.h},{Action:"curve",Control:[{x1:a.x+
.9944296296296296*a.w,y1:a.y+.9999999999999999*a.h,x2:a.x+.9944296296296296*a.w,y2:a.y+.9999999999999999*a.h,x3:a.x+.9944296296296296*a.w,y3:a.y+.9999999999999999*a.h}]},{Action:"line",x:a.x+.022222222222222223*a.w,y:a.y+.9999999999999999*a.h},{Action:"curve",Control:[{x1:a.x+.022222222222222223*a.w,y1:a.y+.9999999999999999*a.h,x2:a.x+.022222222222222223*a.w,y2:a.y+.9999999999999999*a.h,x3:a.x+.022222222222222223*a.w,y3:a.y+.9999999999999999*a.h}]},{Action:"line",x:a.x+.022222222222222223*a.w,y:a.y+
.2632350545691481*a.h},{Action:"curve",Control:[{x1:a.x+.022222222222222223*a.w,y1:a.y+.2632350545691481*a.h,x2:a.x+.022222222222222223*a.w,y2:a.y+.2632350545691481*a.h,x3:a.x+.022222222222222223*a.w,y3:a.y+.2632350545691481*a.h}]},{Action:"close"}]},{FillColor:"rgba(0, 0, 0, 0)",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.022222222222222223*a.w,y:a.y+.2632350545691481*a.h},{Action:"line",x:a.x+.9944296296296296*a.w,y:a.y+.2632350545691481*a.h},{Action:"curve",Control:[{x1:a.x+
.9944296296296296*a.w,y1:a.y+.2632350545691481*a.h,x2:a.x+.9944296296296296*a.w,y2:a.y+.2632350545691481*a.h,x3:a.x+.9944296296296296*a.w,y3:a.y+.2632350545691481*a.h}]},{Action:"line",x:a.x+.9944296296296296*a.w,y:a.y+.9999999999999999*a.h},{Action:"curve",Control:[{x1:a.x+.9944296296296296*a.w,y1:a.y+.9999999999999999*a.h,x2:a.x+.9944296296296296*a.w,y2:a.y+.9999999999999999*a.h,x3:a.x+.9944296296296296*a.w,y3:a.y+.9999999999999999*a.h}]},{Action:"line",x:a.x+.022222222222222223*a.w,y:a.y+.9999999999999999*
a.h},{Action:"curve",Control:[{x1:a.x+.022222222222222223*a.w,y1:a.y+.9999999999999999*a.h,x2:a.x+.022222222222222223*a.w,y2:a.y+.9999999999999999*a.h,x3:a.x+.022222222222222223*a.w,y3:a.y+.9999999999999999*a.h}]},{Action:"line",x:a.x+.022222222222222223*a.w,y:a.y+.2632350545691481*a.h},{Action:"curve",Control:[{x1:a.x+.022222222222222223*a.w,y1:a.y+.2632350545691481*a.h,x2:a.x+.022222222222222223*a.w,y2:a.y+.2632350545691481*a.h,x3:a.x+.022222222222222223*a.w,y3:a.y+.2632350545691481*a.h}]},{Action:"close"}]},
{FillColor:"rgba(0, 0, 0, 0)",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.027555555555555555*a.w,y:a.y+.6334907965466687*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+.6334907965466687*a.h}]},{FillColor:"rgba(0, 0, 0, 0)",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.2805925925925926*a.w,y:a.y+.2711353640658088*a.h},{Action:"line",x:a.x+.2805925925925926*a.w,y:a.y+1*a.h}]}];break;case v.SERVICE:c=2;"sample"==b&&(c=.5);f=[{FillColor:"#ffffff",
StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.5455979804354686*a.w,y:a.y+.18386527059417182*a.h},{Action:"line",x:a.x+.6358472704323129*a.w,y:a.y+.09429796896682227*a.h},{Action:"line",x:a.x+.719785421268539*a.w,y:a.y+.1781884697868046*a.h},{Action:"line",x:a.x+.6295992426633008*a.w,y:a.y+.2677557714141542*a.h},{Action:"line",x:a.x+.6629851688229725*a.w,y:a.y+.34723098271729536*a.h},{Action:"line",x:a.x+.7898390659514042*a.w,y:a.y+.34723098271729536*a.h},{Action:"line",
x:a.x+.7898390659514042*a.w,y:a.y+.46581304402674406*a.h},{Action:"line",x:a.x+.6629851688229725*a.w,y:a.y+.46581304402674406*a.h},{Action:"line",x:a.x+.6295992426633008*a.w,y:a.y+.5459190109751482*a.h},{Action:"line",x:a.x+.719785421268539*a.w,y:a.y+.6354863126024978*a.h},{Action:"line",x:a.x+.6358472704323129*a.w,y:a.y+.7193768134224802*a.h},{Action:"line",x:a.x+.5455979804354686*a.w,y:a.y+.6297464362306043*a.h},{Action:"line",x:a.x+.4660776270116756*a.w,y:a.y+.662608805348808*a.h},{Action:"line",
x:a.x+.4660776270116756*a.w,y:a.y+.7899583701274127*a.h},{Action:"line",x:a.x+.34742821079204794*a.w,y:a.y+.7899583701274127*a.h},{Action:"line",x:a.x+.34742821079204794*a.w,y:a.y+.662608805348808*a.h},{Action:"line",x:a.x+.26727674345219316*a.w,y:a.y+.6297464362306043*a.h},{Action:"line",x:a.x+.17765856737141053*a.w,y:a.y+.7193768134224802*a.h},{Action:"line",x:a.x+.0937204165351846*a.w,y:a.y+.6354863126024978*a.h},{Action:"line",x:a.x+.18333859261596716*a.w,y:a.y+.5459190109751482*a.h},{Action:"line",
x:a.x+.150520668980751*a.w,y:a.y+.46644379967200705*a.h},{Action:"line",x:a.x+.023666771852319343*a.w,y:a.y+.46644379967200705*a.h},{Action:"line",x:a.x+.023666771852319343*a.w,y:a.y+.34786173836255835*a.h},{Action:"line",x:a.x+.150520668980751*a.w,y:a.y+.34786173836255835*a.h},{Action:"line",x:a.x+.18333859261596716*a.w,y:a.y+.2677557714141542*a.h},{Action:"line",x:a.x+.0937204165351846*a.w,y:a.y+.1781884697868046*a.h},{Action:"line",x:a.x+.17765856737141053*a.w,y:a.y+.09429796896682227*a.h},{Action:"line",
x:a.x+.26727674345219316*a.w,y:a.y+.18386527059417182*a.h},{Action:"line",x:a.x+.34742821079204794*a.w,y:a.y+.15106597704049451*a.h},{Action:"line",x:a.x+.34742821079204794*a.w,y:a.y+.023653336697363442*a.h},{Action:"line",x:a.x+.4660776270116756*a.w,y:a.y+.023653336697363442*a.h},{Action:"line",x:a.x+.4660776270116756*a.w,y:a.y+.15106597704049451*a.h},{Action:"line",x:a.x+.5455979804354686*a.w,y:a.y+.18386527059417182*a.h},{Action:"close"}]},{FillColor:"#ffffff",StrokeColor:"#000000",LineWidth:c,
NoRounding:!0,Actions:[{Action:"move",x:a.x+.5455979804354686*a.w,y:a.y+.18386527059417182*a.h},{Action:"line",x:a.x+.6358472704323129*a.w,y:a.y+.09429796896682227*a.h},{Action:"line",x:a.x+.719785421268539*a.w,y:a.y+.1781884697868046*a.h},{Action:"line",x:a.x+.6295992426633008*a.w,y:a.y+.2677557714141542*a.h},{Action:"line",x:a.x+.6629851688229725*a.w,y:a.y+.34723098271729536*a.h},{Action:"line",x:a.x+.7898390659514042*a.w,y:a.y+.34723098271729536*a.h},{Action:"line",x:a.x+.7898390659514042*a.w,
y:a.y+.46581304402674406*a.h},{Action:"line",x:a.x+.6629851688229725*a.w,y:a.y+.46581304402674406*a.h},{Action:"line",x:a.x+.6295992426633008*a.w,y:a.y+.5459190109751482*a.h},{Action:"line",x:a.x+.719785421268539*a.w,y:a.y+.6354863126024978*a.h},{Action:"line",x:a.x+.6358472704323129*a.w,y:a.y+.7193768134224802*a.h},{Action:"line",x:a.x+.5455979804354686*a.w,y:a.y+.6297464362306043*a.h},{Action:"line",x:a.x+.4660776270116756*a.w,y:a.y+.662608805348808*a.h},{Action:"line",x:a.x+.4660776270116756*a.w,
y:a.y+.7899583701274127*a.h},{Action:"line",x:a.x+.34742821079204794*a.w,y:a.y+.7899583701274127*a.h},{Action:"line",x:a.x+.34742821079204794*a.w,y:a.y+.662608805348808*a.h},{Action:"line",x:a.x+.26727674345219316*a.w,y:a.y+.6297464362306043*a.h},{Action:"line",x:a.x+.17765856737141053*a.w,y:a.y+.7193768134224802*a.h},{Action:"line",x:a.x+.0937204165351846*a.w,y:a.y+.6354863126024978*a.h},{Action:"line",x:a.x+.18333859261596716*a.w,y:a.y+.5459190109751482*a.h},{Action:"line",x:a.x+.150520668980751*
a.w,y:a.y+.46644379967200705*a.h},{Action:"line",x:a.x+.023666771852319343*a.w,y:a.y+.46644379967200705*a.h},{Action:"line",x:a.x+.023666771852319343*a.w,y:a.y+.34786173836255835*a.h},{Action:"line",x:a.x+.150520668980751*a.w,y:a.y+.34786173836255835*a.h},{Action:"line",x:a.x+.18333859261596716*a.w,y:a.y+.2677557714141542*a.h},{Action:"line",x:a.x+.0937204165351846*a.w,y:a.y+.1781884697868046*a.h},{Action:"line",x:a.x+.17765856737141053*a.w,y:a.y+.09429796896682227*a.h},{Action:"line",x:a.x+.26727674345219316*
a.w,y:a.y+.18386527059417182*a.h},{Action:"line",x:a.x+.34742821079204794*a.w,y:a.y+.15106597704049451*a.h},{Action:"line",x:a.x+.34742821079204794*a.w,y:a.y+.023653336697363442*a.h},{Action:"line",x:a.x+.4660776270116756*a.w,y:a.y+.023653336697363442*a.h},{Action:"line",x:a.x+.4660776270116756*a.w,y:a.y+.15106597704049451*a.h},{Action:"line",x:a.x+.5455979804354686*a.w,y:a.y+.18386527059417182*a.h},{Action:"close"}]},{FillColor:"#ffffff",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",
x:a.x+.5367623856106027*a.w,y:a.y+.4065220133720197*a.h},{Action:"curve",Control:[{x1:a.x+.5367623856106027*a.w,y1:a.y+.33455279424750856*a.h,x2:a.x+.4786999053329126*a.w,y2:a.y+.27652327488331024*a.h,x3:a.x+.40675291890186177*a.w,y3:a.y+.27652327488331024*a.h}]},{Action:"curve",Control:[{x1:a.x+.33480593247081103*a.w,y1:a.y+.27652327488331024*a.h,x2:a.x+.27674345219312085*a.w,y2:a.y+.33455279424750856*a.h,x3:a.x+.27674345219312085*a.w,y3:a.y+.4065220133720197*a.h}]},{Action:"curve",Control:[{x1:a.x+
.27674345219312085*a.w,y1:a.y+.4784281569320046*a.h,x2:a.x+.334805932470811*a.w,y2:a.y+.5370253563769396*a.h,x3:a.x+.40675291890186177*a.w,y3:a.y+.5370253563769396*a.h}]},{Action:"curve",Control:[{x1:a.x+.47869990533291257*a.w,y1:a.y+.5370884319414659*a.h,x2:a.x+.5367623856106027*a.w,y2:a.y+.4784281569320046*a.h,x3:a.x+.5367623856106027*a.w,y3:a.y+.4065220133720197*a.h}]},{Action:"close"}]},{FillColor:"#ffffff",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.7563900284001261*
a.w,y:a.y+.3939069004667592*a.h},{Action:"line",x:a.x+.8460082044809087*a.w,y:a.y+.30433959883940964*a.h},{Action:"line",x:a.x+.9299463553171347*a.w,y:a.y+.388230099659392*a.h},{Action:"line",x:a.x+.8403281792363521*a.w,y:a.y+.47779740128674153*a.h},{Action:"line",x:a.x+.8731461028715684*a.w,y:a.y+.5579033682351457*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+.5579033682351457*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+.6764854295445945*a.h},{Action:"line",x:a.x+.8731461028715684*a.w,y:a.y+.6764854295445945*
a.h},{Action:"line",x:a.x+.8403281792363521*a.w,y:a.y+.7558975652832093*a.h},{Action:"line",x:a.x+.9299463553171347*a.w,y:a.y+.8461586981203482*a.h},{Action:"line",x:a.x+.8460082044809087*a.w,y:a.y+.9300491989403306*a.h},{Action:"line",x:a.x+.7563900284001261*a.w,y:a.y+.8397880661031917*a.h},{Action:"line",x:a.x+.6762385610602714*a.w,y:a.y+.8732811908666583*a.h},{Action:"line",x:a.x+.6762385610602714*a.w,y:a.y+1*a.h},{Action:"line",x:a.x+.5575891448406438*a.w,y:a.y+1*a.h},{Action:"line",x:a.x+.5575891448406438*
a.w,y:a.y+.8732811908666583*a.h},{Action:"line",x:a.x+.4780687914168507*a.w,y:a.y+.8397880661031917*a.h},{Action:"line",x:a.x+.38781950142000626*a.w,y:a.y+.9300491989403306*a.h},{Action:"line",x:a.x+.3045124644998422*a.w,y:a.y+.8461586981203482*a.h},{Action:"line",x:a.x+.3941306405806248*a.w,y:a.y+.7558975652832093*a.h},{Action:"line",x:a.x+.36068160302934676*a.w,y:a.y+.6764854295445945*a.h},{Action:"line",x:a.x+.23382770590091512*a.w,y:a.y+.6764854295445945*a.h},{Action:"line",x:a.x+.23382770590091512*
a.w,y:a.y+.5579033682351457*a.h},{Action:"line",x:a.x+.36068160302934676*a.w,y:a.y+.5579033682351457*a.h},{Action:"line",x:a.x+.3941306405806248*a.w,y:a.y+.4784281569320046*a.h},{Action:"line",x:a.x+.3038813505837804*a.w,y:a.y+.388230099659392*a.h},{Action:"line",x:a.x+.38781950142000626*a.w,y:a.y+.30433959883940964*a.h},{Action:"line",x:a.x+.4780687914168507*a.w,y:a.y+.3939069004667592*a.h},{Action:"line",x:a.x+.5575891448406438*a.w,y:a.y+.36110760691308186*a.h},{Action:"line",x:a.x+.5575891448406438*
a.w,y:a.y+.23432572221521383*a.h},{Action:"line",x:a.x+.6762385610602714*a.w,y:a.y+.23432572221521383*a.h},{Action:"line",x:a.x+.6762385610602714*a.w,y:a.y+.36110760691308186*a.h},{Action:"line",x:a.x+.7563900284001261*a.w,y:a.y+.3939069004667592*a.h},{Action:"close"}]},{FillColor:"#ffffff",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.7563900284001261*a.w,y:a.y+.3939069004667592*a.h},{Action:"line",x:a.x+.8460082044809087*a.w,y:a.y+.30433959883940964*a.h},{Action:"line",
x:a.x+.9299463553171347*a.w,y:a.y+.388230099659392*a.h},{Action:"line",x:a.x+.8403281792363521*a.w,y:a.y+.47779740128674153*a.h},{Action:"line",x:a.x+.8731461028715684*a.w,y:a.y+.5579033682351457*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+.5579033682351457*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+.6764854295445945*a.h},{Action:"line",x:a.x+.8731461028715684*a.w,y:a.y+.6764854295445945*a.h},{Action:"line",x:a.x+.8403281792363521*a.w,y:a.y+.7558975652832093*a.h},{Action:"line",x:a.x+.9299463553171347*a.w,y:a.y+
.8461586981203482*a.h},{Action:"line",x:a.x+.8460082044809087*a.w,y:a.y+.9300491989403306*a.h},{Action:"line",x:a.x+.7563900284001261*a.w,y:a.y+.8397880661031917*a.h},{Action:"line",x:a.x+.6762385610602714*a.w,y:a.y+.8732811908666583*a.h},{Action:"line",x:a.x+.6762385610602714*a.w,y:a.y+1*a.h},{Action:"line",x:a.x+.5575891448406438*a.w,y:a.y+1*a.h},{Action:"line",x:a.x+.5575891448406438*a.w,y:a.y+.8732811908666583*a.h},{Action:"line",x:a.x+.4780687914168507*a.w,y:a.y+.8397880661031917*a.h},{Action:"line",
x:a.x+.38781950142000626*a.w,y:a.y+.9300491989403306*a.h},{Action:"line",x:a.x+.3045124644998422*a.w,y:a.y+.8461586981203482*a.h},{Action:"line",x:a.x+.3941306405806248*a.w,y:a.y+.7558975652832093*a.h},{Action:"line",x:a.x+.36068160302934676*a.w,y:a.y+.6764854295445945*a.h},{Action:"line",x:a.x+.23382770590091512*a.w,y:a.y+.6764854295445945*a.h},{Action:"line",x:a.x+.23382770590091512*a.w,y:a.y+.5579033682351457*a.h},{Action:"line",x:a.x+.36068160302934676*a.w,y:a.y+.5579033682351457*a.h},{Action:"line",
x:a.x+.3941306405806248*a.w,y:a.y+.4784281569320046*a.h},{Action:"line",x:a.x+.3038813505837804*a.w,y:a.y+.388230099659392*a.h},{Action:"line",x:a.x+.38781950142000626*a.w,y:a.y+.30433959883940964*a.h},{Action:"line",x:a.x+.4780687914168507*a.w,y:a.y+.3939069004667592*a.h},{Action:"line",x:a.x+.5575891448406438*a.w,y:a.y+.36110760691308186*a.h},{Action:"line",x:a.x+.5575891448406438*a.w,y:a.y+.23432572221521383*a.h},{Action:"line",x:a.x+.6762385610602714*a.w,y:a.y+.23432572221521383*a.h},{Action:"line",
x:a.x+.6762385610602714*a.w,y:a.y+.36110760691308186*a.h},{Action:"line",x:a.x+.7563900284001261*a.w,y:a.y+.3939069004667592*a.h},{Action:"close"}]},{FillColor:"#ffffff",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.7475544335752603*a.w,y:a.y+.6171943988898702*a.h},{Action:"curve",Control:[{x1:a.x+.7475544335752603*a.w,y1:a.y+.5452251797653589*a.h,x2:a.x+.6888608393815084*a.w,y2:a.y+.48662798032042387*a.h,x3:a.x+.6169138529504575*a.w,y3:a.y+.48662798032042387*a.h}]},
{Action:"curve",Control:[{x1:a.x+.5449668665194067*a.w,y1:a.y+.48662798032042387*a.h,x2:a.x+.4869043862417166*a.w,y2:a.y+.5452882553298852*a.h,x3:a.x+.4869043862417166*a.w,y3:a.y+.6171943988898702*a.h}]},{Action:"curve",Control:[{x1:a.x+.4869043862417166*a.w,y1:a.y+.689100542449855*a.h,x2:a.x+.5449668665194067*a.w,y2:a.y+.7471300618140533*a.h,x3:a.x+.6169138529504575*a.w,y3:a.y+.7471300618140533*a.h}]},{Action:"curve",Control:[{x1:a.x+.6888608393815083*a.w,y1:a.y+.7471300618140533*a.h,x2:a.x+.7475544335752603*
a.w,y2:a.y+.689100542449855*a.h,x3:a.x+.7475544335752603*a.w,y3:a.y+.6171943988898702*a.h}]},{Action:"close"}]}];break;case v.SCRIPT:c=2,"sample"==b&&(c=.5),f=[{FillColor:"#ffffff",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.3072001176730161*a.w,y:a.y+.028291210863824974*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+.028291210863824974*a.h},{Action:"curve",Control:[{x1:a.x+1*a.w,y1:a.y+.028291210863824974*a.h,x2:a.x+.7212620430977421*a.w,y2:a.y+.16710675216899284*a.h,x3:a.x+
.7212620430977421*a.w,y3:a.y+.3021501320256507*a.h}]},{Action:"curve",Control:[{x1:a.x+.7212620430977421*a.w,y1:a.y+.4364390795926066*a.h,x2:a.x+.932338015738766*a.w,y2:a.y+.5963787250094305*a.h,x3:a.x+.932338015738766*a.w,y3:a.y+.7510373443983404*a.h}]},{Action:"curve",Control:[{x1:a.x+.932338015738766*a.w,y1:a.y+.9064503960769522*a.h,x2:a.x+.7330293447083915*a.w,y2:a.y+1*a.h,x3:a.x+.7330293447083915*a.w,y3:a.y+1*a.h}]},{Action:"line",x:a.x+.013017577406780879*a.w,y:a.y+1*a.h},{Action:"curve",Control:[{x1:a.x+
.013017577406780879*a.w,y1:a.y+1*a.h,x2:a.x+.2513054350224314*a.w,y2:a.y+.8694832138815541*a.h,x3:a.x+.2513054350224314*a.w,y3:a.y+.7555639381365522*a.h}]},{Action:"curve",Control:[{x1:a.x+.2513054350224314*a.w,y1:a.y+.6408902301018483*a.h,x2:a.x+.03287489887475176*a.w,y2:a.y+.42436816295737456*a.h,x3:a.x+.03287489887475176*a.w,y3:a.y+.30215013202565066*a.h}]},{Action:"curve",Control:[{x1:a.x+.03287489887475176*a.w,y1:a.y+.17993210109392674*a.h,x2:a.x+.3072001176730161*a.w,y2:a.y+.028291210863824974*
a.h,x3:a.x+.3072001176730161*a.w,y3:a.y+.028291210863824974*a.h}]},{Action:"close"}]},{FillColor:"#ffffff",StrokeColor:"#000000",LineWidth:c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.3072001176730161*a.w,y:a.y+.028291210863824974*a.h},{Action:"line",x:a.x+1*a.w,y:a.y+.028291210863824974*a.h},{Action:"curve",Control:[{x1:a.x+1*a.w,y1:a.y+.028291210863824974*a.h,x2:a.x+.7212620430977421*a.w,y2:a.y+.16710675216899284*a.h,x3:a.x+.7212620430977421*a.w,y3:a.y+.3021501320256507*a.h}]},{Action:"curve",
Control:[{x1:a.x+.7212620430977421*a.w,y1:a.y+.4364390795926066*a.h,x2:a.x+.932338015738766*a.w,y2:a.y+.5963787250094305*a.h,x3:a.x+.932338015738766*a.w,y3:a.y+.7510373443983404*a.h}]},{Action:"curve",Control:[{x1:a.x+.932338015738766*a.w,y1:a.y+.9064503960769522*a.h,x2:a.x+.7330293447083915*a.w,y2:a.y+1*a.h,x3:a.x+.7330293447083915*a.w,y3:a.y+1*a.h}]},{Action:"line",x:a.x+.013017577406780879*a.w,y:a.y+1*a.h},{Action:"curve",Control:[{x1:a.x+.013017577406780879*a.w,y1:a.y+1*a.h,x2:a.x+.2513054350224314*
a.w,y2:a.y+.8694832138815541*a.h,x3:a.x+.2513054350224314*a.w,y3:a.y+.7555639381365522*a.h}]},{Action:"curve",Control:[{x1:a.x+.2513054350224314*a.w,y1:a.y+.6408902301018483*a.h,x2:a.x+.03287489887475176*a.w,y2:a.y+.42436816295737456*a.h,x3:a.x+.03287489887475176*a.w,y3:a.y+.30215013202565066*a.h}]},{Action:"curve",Control:[{x1:a.x+.03287489887475176*a.w,y1:a.y+.17993210109392674*a.h,x2:a.x+.3072001176730161*a.w,y2:a.y+.028291210863824974*a.h,x3:a.x+.3072001176730161*a.w,y3:a.y+.028291210863824974*
a.h}]},{Action:"close"}]},{FillColor:"#000000",StrokeColor:"#000000",LineWidth:1.5*c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.17187614915054794*a.w,y:a.y+.23651452282157676*a.h},{Action:"line",x:a.x+.6418327572258586*a.w,y:a.y+.23651452282157676*a.h}]},{FillColor:"#000000",StrokeColor:"#000000",LineWidth:1.5*c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.1836434507611973*a.w,y:a.y+.4288947566955866*a.h},{Action:"line",x:a.x+.6536000588365081*a.w,y:a.y+.4288947566955866*a.h}]},{FillColor:"#000000",
StrokeColor:"#000000",LineWidth:1.5*c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.30352283591968815*a.w,y:a.y+.6325914749151264*a.h},{Action:"line",x:a.x+.7727439876443333*a.w,y:a.y+.6325914749151264*a.h}]},{FillColor:"#000000",StrokeColor:"#000000",LineWidth:1.5*c,NoRounding:!0,Actions:[{Action:"move",x:a.x+.3152901375303376*a.w,y:a.y+.8370426254243682*a.h},{Action:"line",x:a.x+.7845112892549827*a.w,y:a.y+.8370426254243682*a.h}]}]}return f}function N(c,e,b){var d=[];switch(e){case 1:d=aa(c,b);break;
case 2:d=Z(c,b);break;case 3:d=K(c,0,b);break;case 4:d=K(c,0,b,1)}return d}function ua(c,e){var b=lucid.plugin.getAllProperties(c),d=b.Fields,a={};a.MPChecked=lucid.plugin.getProperty(c,"MPChecked");for(var f=0;f<e.length;f++){a[e[f]]=[];for(var g=0;g<d;g++){var k=e[f]+(g+1),h=lucid.text.plainText(b[k]);a[e[f]].push({text:h,t:h,s:lucid.text.getStyle(c,k),r:g})}}O=a.rowCount=d;return a}function P(c){var e=A.getInput(),b={},d=c.length,a=0;b.MPChecked=[];for(var f=0;f<c.length;f++)b[c[f]]=[];for(f=0;f<
e.length;f++)"checkbox"==e[f].type?b.MPChecked[a]=e[f].checked:(0==f%d&&a++,b[c[f%d]].push({text:e[f].value,t:e[f].data.origText,r:e[f].data.origRow,s:e[f].data.styleData}));b.rowCount=a;return Q=b}function R(c,e,b){function d(a,b){return{tag:"label",children:[{tag:"input",attr:{type:"checkbox",checked:a}}," Multiple Participants"]}}b={tag:"ul",classes:"bpmn-modify-list",sortable:{revert:100,handle:".drag-handle",axis:"y",update:function(){A.update(R(P(e),e))}},children:[]};for(var a=c.rowCount,f=
0;f<a;f++){for(var g=[{classes:"drag-handle ui-icon-carat-2-n-s ui-icon"}],k=0;k<e.length;k++)g.push({tag:"input",attr:{type:"text"},value:c[e[k]][f].text,data:{styleData:c[e[k]][f].s||!1,origRow:null!=c[e[k]][f].r?c[e[k]][f].r:f,origText:c[e[k]][f].t}});g.push({classes:"icon silk add",click:function(a){return function(){var b=P(e),d=b.rowCount;if(d<ha){d++;for(var c=0;c<e.length;c++)b[e[c]].splice(a,0,{text:e[c]});b.rowCount=d;A.update(R(b,e))}}}(f+1)});g.push({classes:"icon silk delete",click:function(a){return function(){var b=
P(e),d=b.rowCount;if(1<d){for(var c=0;c<e.length;c++)b[e[c]].splice(a,1);b.rowCount=d-1;A.update(R(b,e))}}}(f)});c.MPChecked?g.push(d(c.MPChecked[f+1])):g.push(d(!1));b.children.push({tag:"li",children:g})}return{classes:"bpmn-modify-container size-"+e.length,children:[b]}}function va(c){var e=lucid.plugin.getProperty(c,"fieldNames",!0),b=ua(c,e);A=lucid.dialog.custom(R(b,e,c),{title:lucid.text.plainText(lucid.plugin.getProperty(c,"Name")),closeButton:!0,modal:!0,width:100+207*e.length,buttons:[{label:lucid.i18n("button.OK"),
action:function(){var b={},a=L(c),f=P(e),g=Q.rowCount,k=Math.max(g,O),h=lucid.plugin.getProperty(c,"Font");lucid.plugin.setProperty(c,"remap",!1);lucid.plugin.setProperty(c,"MPChecked",f.MPChecked);lucid.plugin.setProperty(c,"Fields",g);for(var l=0;l<e.length;l++)for(var m=lucid.text.getStyle(c,e[l]+"1"),p=0;p<g;p++){var n=f[e[l]][p];b[n.r+1]=p+1;n.text==n.t&&n.r==p||lucid.plugin.setProperty(c,e[l]+(p+1),lucid.text.restyle(n.text,n.s||m,h))}for(p=0;p<k;p++)b[p+1]||(b[p+1]="delete");X(c,a,b);lucid.plugin.setProperty(c,
"remap",!0);A.close();A=Q=O=null}},{label:lucid.i18n("button.cancel"),action:function(){A.close();A=Q=O=null}}]});A.open()}var H={global:this,provide:function(c){c=c.split(".");H.global[c[0]]=H.global[c[0]]||{};var e=H.global[c[0]];c.slice(1).reduce(function(b,d){b[d]||(b[d]={});return b[d]},e)},require:function(){},inherits:function(c,e){function b(){}b.prototype=e.prototype;c.superClass_=e.prototype;c.prototype=new b;c.prototype.constructor=c;c.base=function(b,a,c){var g=Array.prototype.slice.call(arguments,
2);return e.prototype[a].apply(b,g)}},base:function(c,e,b){var d=arguments.callee.caller;if(H.STRICT_MODE_COMPATIBLE||H.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(c,Array.prototype.slice.call(arguments,1));for(var a=Array.prototype.slice.call(arguments,2),f=!1,g=c.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[e]===
d)f=!0;else if(f)return g.prototype[e].apply(c,a);if(c[e]===d)return c.constructor.prototype[e].apply(c,a);throw Error("goog.base called from a method of one name to a method of a different name");}};H.provide("plugin.bpmn2");var v={NONE:0,SEND:1,RECEIVE:2,USER:3,MANUAL:4,BUSINESS_RULE:5,SERVICE:6,SCRIPT:7},w={NONE:0,SUB_PROCESS:1,LOOP:2,PARALLEL_MI:3,SEQUENTIAL_MI:4,AD_HOC:5,COMPENSATION:6},ma=!1,B=function(){ma||(lucid.plugin.openPanel("plugin"),ma=!0)},ba=function(c){return 2!=lucid.plugin.getProperty(c,
"bpmnEventGroup")},ca=function(c){return 1==lucid.plugin.getProperty(c,"bpmnEventGroup")};lucid.plugin.onDocumentLoaded(function(){function c(b,c,d){function f(a,b){for(var d=c.value?c.value(b[0]):lucid.plugin.getProperty(b[0],a),e=1;e<b.length;e++)if(d!=(c.value?c.value(b[e]):lucid.plugin.getProperty(b[e],a)))return null;return d}function e(a,b){c.change?lucid.array.forEach(c.ids,function(d){c.change(a,b,d)}):b||(lucid.array.forEach(c.ids,function(b){lucid.plugin.setPropertyIfChanged(b,c.prop,a)}),
d())}function p(a,b){a=parseInt(a,10);e(a,b)}c.pairs=c.pairs||[];a&&!c.nospace&&b.spacer();a=!0;if("spinner"==c.type)b.addGrid({width:6,content:{text:c.name+":",classes:"crop ralign"}}),b.openGrid({width:3,suffix:3}),b.addInput({type:"spinner",min:1,max:100,step:1,value:f(c.prop,c.ids),defaultVal:" ",onChange:e}),b.close();else if("select"==c.type){b.addGrid({width:6,content:{text:c.name+":",classes:"crop ralign"}});var n=[];lucid.object.forEach(c.options,function(a,b){n.push({label:a,value:b})});
b.openGrid({width:6});b.addInput({type:"select",options:n,onChange:p}).setValue(f(c.prop,c.ids));b.close()}else"checkbox"==c.type?(b.addGrid({width:6,content:{text:c.name+":",classes:"crop ralign"}}),b.openGrid({width:6}),b.addInput({type:"checkbox",checked:f(c.prop,c.ids),onChange:e}),b.close()):"button"==c.type&&(b.openGrid({prefix:2,suffix:2,width:8}),b.addButton({onClick:function(){c.onClick(c.ids[0])},label:c.name}),b.close())}function e(g){var k=function(){e(g)};g=lucid.array.filter(g,function(a){return a.isBlock});
if(!lucid.array.every(g,function(a){return 0==a.className.search("BPMN")&&(!lucid.newEditor||!lucid.abTest.shouldShowAdvancedOptionsDrawer()||"BPMNEvent"!=a.className&&"BPMNActivity"!=a.className&&"BPMNConversation"!=a.className&&"BPMNGateway"!=a.className&&"BPMNData"!=a.className)}))return!1;var h=!1;f=a=!1;var l=lucid.template.builder(),m=null,p=function(a,b,c){var d=lucid.plugin.getProperty(c,"BoundingBox"),f=lucid.plugin.getProperty(c,"Rotation")||0;if(b&&d){if("add"===a){a=d.w*b[b.length-1].p;
var e=d.w+a,g=[],k=[],h;for(h=0;h<b.length;h++){var n={p:d.w*b[h].p/e,tid:b[h].tid};g.push(n);k.push(n.tid)}for(;lucid.array.contains(k,h);)h++;g.push({p:a/e,tid:parseInt(h)})}else for(e=d.w*(1-b.pop().p),g=[],h=0;h<b.length;h++)n={p:d.w*b[h].p/e,tid:b[h].tid},g.push(n);50>=g.length&&0<g.length&&(lucid.plugin.setProperty(c,"Lanes",g),0!=f&&(d.x+=(d.w-e)/2,d.y-=(d.w-e)/2),d.w=e,lucid.plugin.setProperty(c,"BoundingBox",d))}},n={bpmnActivityType:{ids:[],name:"Activity",type:"select",options:{1:"Task",
2:"Transaction",3:"Event Sub-Process",4:"Call Activity"},prop:"bpmnActivityType"},bpmnTaskType:{ids:[],name:"Task Types",prop:"bpmnTaskType",type:"select",options:{0:"",1:"Send",2:"Receive",3:"User",4:"Manual",5:"Business Rule",6:"Service",7:"Script"}},bpmnActivityMarker1:{ids:[],name:"Activity Marker",prop:"bpmnActivityMarker1",type:"select",options:{0:"",1:"Sub-Process",2:"Loop",3:"Parallel MI",4:"Sequential MI",5:"Ad Hoc",6:"Compensation"}},bpmnActivityMarker2:{ids:[],name:"Secondary Marker",prop:"bpmnActivityMarker2",
type:"select",options:{0:"",1:"Sub-Process",2:"Loop",3:"Parallel MI",4:"Sequential MI",5:"Ad Hoc",6:"Compensation"}},bpmnEventGroup:{ids:[],name:"Event Group",prop:"bpmnEventGroup",type:"select",options:{0:"Start",1:"Intermediate",2:"End"}},bpmnEventType:{ids:[],name:"Event Type",prop:"bpmnEventType",type:"select",options:{0:"None",1:"Message",2:"Timer",3:"Escalation",4:"Conditional",5:"Link",6:"Error",7:"Cancel",8:"Compensation",9:"Signal",10:"Multiple",11:"Parallel Multiple",12:"Terminate"}},bpmnDashed:{ids:[],
name:"Non-Interrupting",prop:"bpmnDashed",type:"checkbox",condition:ba},bpmnInvertedIcon:{ids:[],name:"Throwing",prop:"bpmnInvertedIcon",type:"checkbox",condition:ca},bpmnGatewayType:{ids:[],name:"Gateway Type",prop:"bpmnGatewayType",type:"select",options:{0:"",1:"Exclusive",2:"Event Based",3:"Parallel",4:"Inclusive",5:"Exclusive Event Based",6:"Complex",7:"Parallel Event Based"}},bpmnConversationType:{ids:[],name:"Conversation",prop:"bpmnConversationType",type:"select",options:{0:"",1:"Call"}},bpmnIsSubConversation:{ids:[],
name:"Sub Conversation",prop:"bpmnIsSubConversation",type:"checkbox"},bpmnDataType:{ids:[],name:"Data Type",prop:"bpmnDataType",type:"select",options:{0:"",1:"Collection",2:"Input",3:"Output"}},Fields:{ids:[],prop:"Fields",name:"Fields",type:"spinner"},bpmnChoreographyType:{ids:[],prop:"bpmnChoreographyType",name:"Choreography",type:"select",options:{0:"Task",1:"Sub-Choreography",2:"Call"}},initiatingMessage:{ids:[],prop:"initiatingMessage",name:"Initiating Message",type:"checkbox"},responseMessage:{ids:[],
name:"Response Message",type:"checkbox",prop:"responseMessage"},fieldNames:{ids:[],prop:"Fields",name:"Manage Participants",type:"button",condition:function(a){return"BPMNChoreography"==lucid.plugin.getBlockClassName(a)&&1==g.length},onClick:va},poolCount:{ids:[],name:"Lanes",type:"spinner",prop:"Lanes",value:function(a){return lucid.plugin.getProperty(a,"Lanes").length},change:function(a,b,c){b=lucid.plugin.getProperty(c,"Lanes");var d=b.length;if(d<a)for(;d<a;d++)p("add",b,c);else if(d>a)for(;d>
a;d--)p("remove",b,c)}},poolFlow:{ids:[],name:"Orientation",type:"select",prop:"Vertical",options:{0:"Horizontal",1:"Vertical"}},poolTextFlow:{ids:[],name:"Text Orientation",type:"select",prop:"VerticalText",options:{0:"Horizontal",1:"Vertical"}}},q={};lucid.array.forEach(g,function(a){lucid.object.forEach(n,function(b){null!=lucid.plugin.getProperty(a.id,b.prop)&&(b.condition?b.condition(a.id):1)&&b.ids.push(a.id)})});lucid.object.forEach(n,function(b){if(0<b.ids.length){if(b.group!=m){var d=b.group;
f&&l.hr();l.addGrid({width:12,content:{text:d,css:{"font-weight":"bold"}}});f=!0;a=!1;m=b.group}c(l,b,k);h=!0}});1==g.length&&q[g[0].className]&&(q=q[g[0].className],q.id=g[0].id,c(l,q),h=!0);b.getElement(d).setContent(l);return h}var b=lucid.template.builder(),d=b.add({classes:"ios_inputs"}),a=!1,f=!1;lucid.useragent.is_touch()||lucid.plugin.addCustomPanel("Context Panel",null,[{content:b}],null,{isContextPanel:!0,checkShow:e})});lucid.plugin.initBlockClass({className:"BPMNEvent",name:"Event",variants:{"Start Event":{tooltip:"Start Event",
defaultProperties:function(){return{bpmnEventGroup:0}}},"Intermediate Event":{tooltip:"Intermediate Event",defaultProperties:function(){return{bpmnEventGroup:1}}},"End Event":{tooltip:"End Event",defaultProperties:function(){return{bpmnEventGroup:2}}}},searchKeywords:["bpmn","business","event"],defaultSize:{w:60,h:60},getLinkPoints:function(c){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},onInit:function(c){lucid.plugin.registerProperty(c,"bpmnEventGroup",0);lucid.plugin.registerProperty(c,
"bpmnEventType",0);lucid.plugin.registerProperty(c,"bpmnDashed",0);lucid.plugin.registerProperty(c,"bpmnInvertedIcon",0);lucid.plugin.addBlockTextArea(c,{id:"Text",value:"Event",getBoundingBox:function(c,b){return b?null:{x:c.x,y:c.y+c.h,w:c.w,h:20}}})},onDblClick:function(c){lucid.plugin.editBlockTextArea(c,"Text")},onCreate:function(c){B();lucid.plugin.editBlockTextArea(c,"Text")},getRenderData:function(c,e){"sample"===e&&(c.LineWidth=1);var b=c.bpmnEventGroup,d=2==c.bpmnEventGroup?0:c.bpmnDashed,
a;a=1==c.bpmnEventGroup?c.bpmnInvertedIcon:0==c.bpmnEventGroup?0:1;var f=[];switch(c.bpmnEventType){case 1:f=K(c,a);break;case 2:f=wa(c);break;case 3:f=c.BoundingBox;f=[{FillColor:a?"#000000":"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:f.x+.5*f.w,y:f.y+.2*f.h},{Action:"line",x:f.x+.25*f.w,y:f.y+.75*f.h},{Action:"line",x:f.x+.5*f.w,y:f.y+.45*f.h},{Action:"line",x:f.x+.75*f.w,y:f.y+.75*f.h},{Action:"close"}]}];break;case 4:var g=c.BoundingBox,k=g.x+
g.w/2,h=g.y+g.h/2,f=.7*(g.w/2-5),l=.6*(g.h/2-5);a=k-f;for(var f=k+f,m=h-l,h=h+l,l=.6*(g.w/2-5),g=k-l,k=k+l,l=[],p=(h-m)/5,n=1;4>=n;n++){var q=m+p*n;l.push({Action:"move",x:g,y:q});l.push({Action:"line",x:k,y:q})}f=[{FillColor:"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:a,y:m},{Action:"line",x:f,y:m},{Action:"line",x:f,y:h},{Action:"line",x:a,y:h},{Action:"close"}]},{StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:l}];break;case 5:f=
da(c,a);break;case 6:g=c.BoundingBox;f=g.x+g.w/2;m=g.y+g.h/2;h=.7*(g.w/2-5);g=.7*(g.h/2-5);f=[{FillColor:a?"#000000":"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:f-.9*h,y:m+g},{Action:"line",x:f-.3*h,y:m-.4*g},{Action:"line",x:f+.3*h,y:m+.1*g},{Action:"line",x:f+.9*h,y:m-g},{Action:"line",x:f+.4*h,y:m+.5*g},{Action:"line",x:f-.2*h,y:m-.05*g},{Action:"close"}]}];break;case 7:f=c.BoundingBox;f=[{FillColor:a?"#000000":"#ffffff",StrokeColor:c.LineColor,
LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:f.x+.33*f.w,y:f.y+.27*f.h},{Action:"line",x:f.x+.5*f.w,y:f.y+.45*f.h},{Action:"line",x:f.x+.67*f.w,y:f.y+.27*f.h},{Action:"line",x:f.x+.73*f.w,y:f.y+.33*f.h},{Action:"line",x:f.x+.55*f.w,y:f.y+.5*f.h},{Action:"line",x:f.x+.73*f.w,y:f.y+.67*f.h},{Action:"line",x:f.x+.67*f.w,y:f.y+.73*f.h},{Action:"line",x:f.x+.5*f.w,y:f.y+.55*f.h},{Action:"line",x:f.x+.33*f.w,y:f.y+.73*f.h},{Action:"line",x:f.x+.27*f.w,y:f.y+.67*f.h},{Action:"line",x:f.x+
.45*f.w,y:f.y+.5*f.h},{Action:"line",x:f.x+.27*f.w,y:f.y+.33*f.h},{Action:"close"}]}];break;case 8:f=la(c,a);break;case 9:f=c.BoundingBox;f=[{FillColor:a?"#000000":"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:f.x+.5*f.w,y:f.y+.2*f.h},{Action:"line",x:f.x+.2*f.w,y:f.y+.7*f.h},{Action:"line",x:f.x+.8*f.w,y:f.y+.7*f.h},{Action:"close"}]}];break;case 10:f=c.BoundingBox;f=[{FillColor:a?"#000000":"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,
NoRounding:!0,Actions:[{Action:"move",x:f.x+.5*f.w,y:f.y+.2*f.h},{Action:"line",x:f.x+.2*f.w,y:f.y+.4*f.h},{Action:"line",x:f.x+.3*f.w,y:f.y+.75*f.h},{Action:"line",x:f.x+.7*f.w,y:f.y+.75*f.h},{Action:"line",x:f.x+.8*f.w,y:f.y+.4*f.h},{Action:"close"}]}];break;case 11:a=c.BoundingBox;f=[{FillColor:"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:a.x+.4*a.w,y:a.y+.2*a.h},{Action:"line",x:a.x+.4*a.w,y:a.y+.4*a.h},{Action:"line",x:a.x+.2*a.w,y:a.y+.4*a.h},
{Action:"line",x:a.x+.2*a.w,y:a.y+.6*a.h},{Action:"line",x:a.x+.4*a.w,y:a.y+.6*a.h},{Action:"line",x:a.x+.4*a.w,y:a.y+.8*a.h},{Action:"line",x:a.x+.6*a.w,y:a.y+.8*a.h},{Action:"line",x:a.x+.6*a.w,y:a.y+.6*a.h},{Action:"line",x:a.x+.8*a.w,y:a.y+.6*a.h},{Action:"line",x:a.x+.8*a.w,y:a.y+.4*a.h},{Action:"line",x:a.x+.6*a.w,y:a.y+.4*a.h},{Action:"line",x:a.x+.6*a.w,y:a.y+.2*a.h},{Action:"close"}]}];break;case 12:h=c.BoundingBox,a=h.x+h.w/2,f=h.y+h.h/2,m=.85*(h.w/2-5),h=.85*(h.h/2-5),f=[{FillColor:"#000000",
StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:a+m,y:f},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a-m,f-h,2*m,2*h,0,2*Math.PI)},{Action:"close"}]}]}a=f;f=c.BoundingBox;m=[];0==b?m=[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:f.x+f.w,y:f.y+f.h/2},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(f.x,f.y,f.w,f.h,0,2*Math.PI)},{Action:"close"}]}]:1==b?(b=[{FillColor:c.FillColor,StrokeColor:c.LineColor,
LineWidth:c.LineWidth,Actions:[{Action:"move",x:f.x+f.w-3,y:f.y+f.h/2},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(f.x+3,f.y+3,f.w-6,f.h-6,0,2*Math.PI)},{Action:"close"}]}],m=[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:f.x+f.w,y:f.y+f.h/2},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(f.x,f.y,f.w,f.h,0,2*Math.PI)},{Action:"close"}]}],m=m.concat(b)):2==b&&(m=[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth+
4,Actions:[{Action:"move",x:f.x+f.w,y:f.y+f.h/2},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(f.x,f.y,f.w,f.h,0,2*Math.PI)},{Action:"close"}]}]);b=m;d&&(b=lucid.math.dashLine(b,[10,5]));return a=b.concat(a)}});var I=function(c){var e=lucid.plugin.getSelectionDetails();if(1===e.length&&e[0].className===c)return e[0].id},D=function(){return I("BPMNEvent")},x=function(){return I("BPMNActivity")},G=function(){return I("BPMNConversation")},na=function(){return I("BPMNGateway")},oa=function(){return I("BPMNData")},
J=function(){return I("BPMNChoreography")},S=function(c,e){return function(){return!lucid.plugin.getProperty(lucid.isFunction(c)?c():c,e)}},u=function(c,e,b,d,a){return{external:!0,label:c,logAction:d+"."+c.toLowerCase().replace(/ /g,"_"),visible:a,action:function(){lucid.plugin.setProperty(a(),e,lucid.isFunction(b)?b():b)},selected:function(){var c=lucid.plugin.getProperty(a(),e);return!0===c||c===b}}},y=function(c,e){return u(c,"bpmnEventType",e,"plugin.bpmn.event.contextMenu.type",D)},ea=function(c,
e){return u(c,"bpmnEventGroup",e,"plugin.bpmn.event.contextMenu.group",D)},T=function(c,e){return u(c,"bpmnActivityType",e,"plugin.bpmn.activity.contextMenu.activity",x)},E=function(c,e){return u(c,"bpmnTaskType",e,"plugin.bpmn.activity.contextMenu.task",x)},pa=function(c,e){return[u("None",c,w.NONE,e,x),u("Sub-Process",c,w.SUB_PROCESS,e,x),u("Loop",c,w.LOOP,e,x),u("Parallel MI",c,w.PARALLEL_MI,e,x),u("Sequential MI",c,w.SEQUENTIAL_MI,e,x),u("Ad Hoc",c,w.AD_HOC,e,x),u("Compensation",c,w.COMPENSATION,
e,x)]},F=function(c,e){return u(c,"bpmnGatewayType",e,"plugin.bpmn.gateway.contextMenu.type",na)},U=function(c,e){return u(c,"bpmnDataType",e,"plugin.bpmn.data.contextMenu.type",oa)};lucid.plugin.addContextMenuItems([{external:!0,label:"Event Group",logAction:"plugin.bpmn.event.contextMenu.group",visible:D,submenu:[,ea("Start",0),ea("Intermediate",1),ea("End",2)]},{external:!0,label:"Event Type",logAction:"plugin.bpmn.event.contextMenu.type",visible:D,submenu:[y("None",0),y("Message",1),y("Timer",
2),y("Escalation",3),y("Conditional",4),y("Link",5),y("Error",6),y("Cancel",7),y("Compensation",8),y("Signal",9),y("Multiple",10),y("Parallel Multiple",11),y("Terminate",12)]},u("Non-Interrupting","bpmnDashed",function(){var c=D();if(c&&ba(c))return S(c,"bpmnDashed")()},"plugin.bpmn.event.contextMenu",function(){var c=D();return c&&ba(c)?c:!1}),u("Throwing","bpmnInvertedIcon",function(){var c=D();if(c&&ca(c))return S(c,"bpmnInvertedIcon")()},"plugin.bpmn.event.contextMenu",function(){var c=D();return c&&
ca(c)?c:!1}),{external:!0,label:"Activity",logAction:"plugin.bpmn.activity.contextMenu.activity",visible:x,submenu:[T("Task",1),T("Transaction",2),T("Event Sub-Process",3),T("Call Activity",4)]},{external:!0,label:"Task Types",logAction:"plugin.bpmn.activity.contextMenu.task",visible:x,submenu:[E("None",v.NONE),E("Send",v.SEND),E("Receive",v.RECEIVE),E("User",v.USER),E("Manual",v.MANUAL),E("Business Rule",v.BUSINESS_RULE),E("Service",v.SERVICE),E("Script",v.SCRIPT)]},{external:!0,label:"Activity Marker",
logAction:"plugin.bpmn.activity.contextMenu.marker",visible:x,submenu:pa("bpmnActivityMarker1","plugin.bpmn.activity.contextMenu.marker")},{external:!0,label:"Secondary Marker",logAction:"plugin.bpmn.activity.contextMenu.secondaryMarker",visible:x,submenu:pa("bpmnActivityMarker2","plugin.bpmn.activity.contextMenu.secondaryMarker")},u("Call","bpmnConversationType",S(G,"bpmnConversationType"),"plugin.bpmn.conversation.contextMenu",G),u("Sub Conversation","bpmnIsSubConversation",S(G,"bpmnIsSubConversation"),
"plugin.bpmn.conversation.contextMenu",G),{external:!0,label:"Gateway Type",logAction:"plugin.bpmn.gateway.contextMenu.type",visible:na,submenu:[F("None",0),F("Exclusive",1),F("Event Based",2),F("Parallel",3),F("Inclusive",4),F("Exclusive Event Based",5),F("Complex",6),F("Parallel Event Based",7)]},{external:!0,label:"Data Type",logAction:"plugin.bpmn.data.contextMenu.type",visible:oa,submenu:[U("None",0),U("Collection",1),U("Input",2),U("Output",3)]},{external:!0,label:"Insert Participant Above",
logAction:"plugin.bpmn.choreography.contextMenu.insertAbove",visible:ga,action:function(){var c=J();c&&ja(c)}},{external:!0,label:"Insert Participant Below",logAction:"plugin.bpmn.choreography.contextMenu.insertBelow",visible:ga,action:function(){var c=J();c&&ja(c,!0)}},{external:!0,label:"Delete Participant",logAction:"plugin.bpmn.choreography.contextMenu.delete",visible:function(){var c=J();return c?!!lucid.plugin.getProperty(c,"selectedRow",!0)&&1<lucid.plugin.getProperty(c,"Fields"):!1},action:function(){var c=
J();c&&sa(c)}}]);lucid.plugin.initBlockClass({className:"BPMNGateway",name:"Gateway",searchKeywords:["bpmn","business","gateway","decision"],defaultSize:{w:75,h:75},getLinkPoints:function(c){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},onInit:function(c){lucid.plugin.registerProperty(c,"bpmnGatewayType",0);lucid.plugin.addBlockTextArea(c,{id:"Text",value:"",getBoundingBox:function(c,b){return b?null:{x:c.x,y:c.y+c.h,w:c.w,h:20}}})},onDblClick:function(c){lucid.plugin.editBlockTextArea(c,"Text")},
onCreate:function(c){B()},getRenderData:function(c,e){"sample"===e&&(c.LineWidth=1);var b=c.BoundingBox,d;d=[];switch(c.bpmnGatewayType){case 1:d=c.BoundingBox;d=[{StrokeColor:c.LineColor,LineWidth:c.LineWidth+2,NoRounding:!0,Actions:[{Action:"move",x:d.x+.3*d.w,y:d.y+.3*d.h},{Action:"line",x:d.x+.7*d.w,y:d.y+.7*d.h},{Action:"move",x:d.x+.3*d.w,y:d.y+.7*d.h},{Action:"line",x:d.x+.7*d.w,y:d.y+.3*d.h}]}];break;case 2:d=qa(c,1);break;case 3:d=c.BoundingBox;d=[{StrokeColor:c.LineColor,LineWidth:c.LineWidth+
2,NoRounding:!0,Actions:[{Action:"move",x:d.x+.5*d.w,y:d.y+.2*d.h},{Action:"line",x:d.x+.5*d.w,y:d.y+.8*d.h},{Action:"move",x:d.x+.2*d.w,y:d.y+.5*d.h},{Action:"line",x:d.x+.8*d.w,y:d.y+.5*d.h}]}];break;case 4:d=c.BoundingBox;d=[{StrokeColor:c.LineColor,LineWidth:c.LineWidth+2,Actions:[{Action:"move",x:d.x+.7*d.w,y:d.y+.5*d.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(d.x+.3*d.w,d.y+.3*d.h,.4*d.w,.4*d.h,0,2*Math.PI)},{Action:"close"}]}];break;case 5:d=qa(c,0);break;case 6:d=c.BoundingBox;
d=[{StrokeColor:c.LineColor,LineWidth:c.LineWidth+2,NoRounding:!0,Actions:[{Action:"move",x:d.x+.5*d.w,y:d.y+.2*d.h},{Action:"line",x:d.x+.5*d.w,y:d.y+.8*d.h},{Action:"move",x:d.x+.2*d.w,y:d.y+.5*d.h},{Action:"line",x:d.x+.8*d.w,y:d.y+.5*d.h},{Action:"move",x:d.x+.3*d.w,y:d.y+.3*d.h},{Action:"line",x:d.x+.7*d.w,y:d.y+.7*d.h},{Action:"move",x:d.x+.3*d.w,y:d.y+.7*d.h},{Action:"line",x:d.x+.7*d.w,y:d.y+.3*d.h}]}];break;case 7:d=c.BoundingBox,d=[{StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",
x:d.x+.8*d.w,y:d.y+.5*d.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(d.x+.2*d.w,d.y+.2*d.h,.6*d.w,.6*d.h,0,2*Math.PI)},{Action:"close"}]},{FillColor:"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:d.x+.45*d.w,y:d.y+.3*d.h},{Action:"line",x:d.x+.45*d.w,y:d.y+.45*d.h},{Action:"line",x:d.x+.3*d.w,y:d.y+.45*d.h},{Action:"line",x:d.x+.3*d.w,y:d.y+.55*d.h},{Action:"line",x:d.x+.45*d.w,y:d.y+.55*d.h},{Action:"line",x:d.x+.45*d.w,y:d.y+.7*d.h},
{Action:"line",x:d.x+.55*d.w,y:d.y+.7*d.h},{Action:"line",x:d.x+.55*d.w,y:d.y+.55*d.h},{Action:"line",x:d.x+.7*d.w,y:d.y+.55*d.h},{Action:"line",x:d.x+.7*d.w,y:d.y+.45*d.h},{Action:"line",x:d.x+.55*d.w,y:d.y+.45*d.h},{Action:"line",x:d.x+.55*d.w,y:d.y+.3*d.h},{Action:"close"}]}]}d.unshift({FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:b.x,y:b.y+b.h/2},{Action:"line",x:b.x+b.w/2,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+b.h/2},{Action:"line",
x:b.x+b.w/2,y:b.y+b.h},{Action:"close"}]});return d}});lucid.plugin.initBlockClass({className:"BPMNActivity",name:"Activity",variants:{Task:{tooltip:"Task",defaultProperties:function(){return{bpmnActivityType:1,Text:"Task"}}},Transaction:{tooltip:"Transaction",tooltip:"Transaction",defaultProperties:function(){return{bpmnActivityType:2,Text:"Transaction"}}},"Event Sub-Process":{tooltip:"Event Sub-Process",defaultProperties:function(){return{bpmnActivityType:3,Text:"Event Sub-Process"}}},Call:{tooltip:"Call Activity",
defaultProperties:function(){return{bpmnActivityType:4,Text:"Call Activity"}}}},searchKeywords:"bpmn business task rectangle square activity".split(" "),defaultSize:{w:160,h:120},getLinkPoints:function(c){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},onCreate:function(c){B();lucid.plugin.editBlockTextArea(c,"Text")},onInit:function(c){lucid.plugin.registerProperty(c,"bpmnActivityType",0,null,function(e,b){if(e!=b&&null!=lucid.plugin.getProperty(c,"Text")){var d=lucid.text.plainText(lucid.plugin.getProperty(c,
"Text"));if("Task"==d||"Transaction"==d||"Event Sub-Process"==d||"Call Activity"==d||"Activity"==d)1==b?d="Task":2==b?d="Transaction":3==b?d="Event Sub-Process":4==b&&(d="Call Activity"),lucid.plugin.setProperty(c,"Text",d)}});lucid.plugin.registerProperty(c,"bpmnActivityMarker1",0);lucid.plugin.registerProperty(c,"bpmnActivityMarker2",0);lucid.plugin.registerProperty(c,"bpmnTaskType",0);lucid.plugin.addBlockTextArea(c,{id:"Text",value:"",getBoundingBox:function(e){return fa(e,function(b){return{x:b.x+
20,y:b.y,w:b.w-40,h:b.h}},function(b){return{x:b.x,y:b.y,w:b.w,h:b.h,fitShape:lucid.plugin.getProperty(c,"InsetMargin")||0,hideOverflow:!0}})}});1<V()&&(lucid.plugin.registerProperty(c,"TextWrap","fit"),lucid.plugin.registerProperty(c,"InsetMargin",5))},getRenderData:function(c,e){"sample"===e&&(c.LineWidth/=2);var b=c.BoundingBox,d=c.bpmnActivityType,a=c.bpmnActivityMarker1,f=c.bpmnActivityMarker2,g=c.bpmnTaskType;0<parseInt(a,10)&&0<parseInt(f,10)?(a=M(c,a,"left","sample"===e),a=a.concat(M(c,f,
"right","sample"===e))):(a=M(c,a,void 0,"sample"===e),a=a.concat(M(c,f,void 0,"sample"===e)));a=a.concat(ta(c,g,e));f=[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:4==d?c.LineWidth+2:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y},{Action:"line",x:b.x+b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+b.h},{Action:"line",x:b.x,y:b.y+b.h},{Action:"close"}]}];g=Math.min(4,b.w/10);2==d&&f[0].Actions.push({Action:"move",x:b.x+g,y:b.y+g},{Action:"line",x:b.x+b.w-g,y:b.y+g},{Action:"line",x:b.x+b.w-
g,y:b.y+b.h-g},{Action:"line",x:b.x+g,y:b.y+b.h-g},{Action:"close"},{Action:"move",x:b.x+g,y:b.y+g},{Action:"line",x:b.x+b.w-g,y:b.y+g},{Action:"line",x:b.x+b.w-g,y:b.y+b.h-g},{Action:"line",x:b.x+g,y:b.y+b.h-g},{Action:"close"});3==d&&(f=lucid.math.dashLine(f,[2,4]));return a=f.concat(a)}});lucid.plugin.initBlockClass({className:"BPMNData",name:"Data Object",searchKeywords:["bpmn","business","data"],defaultSize:{w:60,h:75},getLinkPoints:function(c){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},
onCreate:function(c){B();lucid.plugin.editBlockTextArea(c,"Text")},onInit:function(c){lucid.plugin.registerProperty(c,"bpmnDataType",0,null,function(e,b){if(e!=b&&null!=lucid.plugin.getProperty(c,"Text")){var d=lucid.text.plainText(lucid.plugin.getProperty(c,"Text"));""!==d&&"Input"!==d&&"Output"!==d||lucid.plugin.setProperty(c,"Text",2==b?"Input":3==b?"Output":"")}});lucid.plugin.addBlockTextArea(c,{id:"Text",value:"",getBoundingBox:function(c){return{x:c.x,y:c.y+30,w:c.w,h:c.h-60}}});lucid.plugin.addBlockTextArea(c,
{id:"Title",value:"",getBoundingBox:function(c,b){return b?null:{x:c.x,y:c.y+c.h,w:c.w,h:20}}})},onDblClick:function(c,e){if(e)return!1;lucid.plugin.editBlockTextArea(c,"Title")},getRenderData:function(c,e){"sample"===e&&(c.LineWidth=1);var b=c.BoundingBox,d=c.bpmnDataType,a=1;"sample"==e&&(a=.6);var a={w:20*a,h:20*a,x:c.BoundingBox.x+c.BoundingBox.w/2-10*a,y:c.BoundingBox.y+c.BoundingBox.h-25*a},f=[];switch(d){case 1:f=aa(c,a);break;case 2:f=da(c,0,1);break;case 3:f=da(c,1,1)}d=f;a=[{FillColor:c.FillColor,
StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:b.x+.6*b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+.3*b.h},{Action:"line",x:b.x+b.w,y:b.y+b.h},{Action:"line",x:b.x,y:b.y+b.h},{Action:"line",x:b.x,y:b.y},{Action:"close"}]}];a=a.concat([{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:b.x+.6*b.w,y:b.y},{Action:"line",x:b.x+.6*b.w,y:b.y+.3*b.h},{Action:"line",x:b.x+b.w,y:b.y+.3*b.h},{Action:"close"}]}]);return d=
a.concat(d)}});lucid.plugin.initBlockClass({className:"BPMNDataStore",name:"Data Store",searchKeywords:["bpmn","business","data","store"],defaultSize:{w:120,h:90},getLinkPoints:function(c){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},onCreate:function(c){B();lucid.plugin.editBlockTextArea(c,"Text")},onInit:function(c){lucid.plugin.addBlockTextArea(c,{id:"Text",value:"Data Store",getBoundingBox:function(c){return{x:c.x,y:c.y+40,w:c.w,h:c.h-50}}})},getRenderData:function(c,e){"sample"===e&&
(c.LineWidth=1);var b=c.BoundingBox,d=[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+b.w,y:b.y+.125*b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y,b.w,.25*b.h,2*Math.PI,Math.PI)},{Action:"line",x:b.x,y:b.y+.9*b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y+.75*b.h,b.w,.25*b.h,Math.PI,0)},{Action:"close"}]}],b=[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",
x:b.x+b.w,y:b.y+.125*b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y,b.w,.25*b.h,0*Math.PI,Math.PI)},{Action:"move",x:b.x+b.w,y:b.y+.22*b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y+.07*b.h,b.w,.25*b.h,0*Math.PI,Math.PI)},{Action:"move",x:b.x+b.w,y:b.y+.29*b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y+.14*b.h,b.w,.25*b.h,0*Math.PI,Math.PI)}]}];return d=d.concat(b)}});lucid.plugin.initBlockClass({className:"BPMNConversation",
name:"Conversation",variants:{Conversation:{tooltip:"Conversation",defaultProperties:function(){return{bpmnConversationType:0}}},"Call Conversation":{tooltip:"Call Conversation",defaultProperties:function(){return{bpmnConversationType:1}}}},onCreate:function(c){B()},searchKeywords:["bpmn","business","conversation"],defaultSize:{w:100,h:75},getLinkPoints:function(c){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},onInit:function(c){lucid.plugin.registerProperty(c,"bpmnConversationType",0);lucid.plugin.registerProperty(c,
"bpmnIsSubConversation",0);lucid.plugin.addBlockTextArea(c,{id:"Text",value:"",getBoundingBox:function(c,b){return b?null:{x:c.x,y:c.y+c.h,w:c.w,h:20}}})},onDblClick:function(c){lucid.plugin.editBlockTextArea(c,"Text")},lineDrawnProperties:function(c,e){return{DoubleLine:!0,Endpoint1:{Style:"None",Padding:5},Endpoint2:{Style:"None",Padding:5},Shape:"elbow"}},getRenderData:function(c,e){"sample"===e&&(c.LineWidth=1);var b=c.BoundingBox,d=c.bpmnConversationType,a=[];c.bpmnIsSubConversation&&(a=1,"sample"===
e&&(a=.5),a=Z(c,{w:20*a,h:20*a,x:b.x+b.w/2-10*a,y:b.y+b.h-25*a}));return a=[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:1==d?c.LineWidth+2:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:b.x+.25*b.w,y:b.y},{Action:"line",x:b.x+.75*b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+.5*b.h},{Action:"line",x:b.x+.75*b.w,y:b.y+b.h},{Action:"line",x:b.x+.25*b.w,y:b.y+b.h},{Action:"line",x:b.x,y:b.y+.5*b.h},{Action:"close"}]}].concat(a)}});var ha=1E3;lucid.plugin.onSelectionChange(function(){lucid.plugin.getDescendants(lucid.plugin.getActivePageId()).forEach(function(c){"BPMNChoreography"==
lucid.plugin.getBlockClassName(c)&&lucid.plugin.setProperty(c,"selectedRow",null,!0)})});lucid.plugin.initBlockClass({className:"BPMNBlackPool",name:"Pool (Black Box)",searchKeywords:["bpmn","pool","lane"],defaultSize:{w:320,h:40},getLinkPoints:function(c){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},onCreate:function(c){B();lucid.plugin.editBlockTextArea(c,"Text")},onInit:function(c){lucid.plugin.registerProperty(c,"Vertical",0,null,function(e,b){if(e!=b){var d=lucid.plugin.getProperty(c,
"BoundingBox");if(null!=e){var a=lucid.plugin.getProperty(c,"Rotation")||0,f=d.x,g=d.y,a=lucid.math.Box.rotate(d,a);a.x=f;a.y=g;lucid.plugin.setProperty(c,"BoundingBox",a)}lucid.plugin.setProperty(c,"Rotation",b?-Math.PI/2:0);d.x+=b?-(d.w-d.h)/2:(d.w-d.h)/2;d.y+=b?-(d.h-d.w)/2:(d.h-d.w)/2;lucid.plugin.setProperty(c,"BoundingBox",d)}});lucid.plugin.addBlockTextArea(c,{id:"Text",value:"Pool (Black Box)",getBoundingBox:function(e){return fa(e,function(b){return{x:b.x+20,y:b.y,w:b.w-40,h:b.h}},function(b){return{x:b.x,
y:b.y,w:b.w,h:b.h,fitShape:lucid.plugin.getProperty(c,"InsetMargin")||0,hideOverflow:!0}})}});1<V()&&(lucid.plugin.registerProperty(c,"TextWrap","fit"),lucid.plugin.registerProperty(c,"InsetMargin",5))},getRenderData:function(c,e){"sample"===e&&(c.LineWidth=1);var b=c.BoundingBox;return[{FillColor:lucid.color.darken(c.FillColor,.25),StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y},{Action:"line",x:b.x+b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+b.h},{Action:"line",
x:b.x,y:b.y+b.h},{Action:"close"}]}]}});var K=function(c,e,b,d){if(b)var a=b,f=a.w/2,g=.8*(a.h/2-a.h/35*5);else a=c.BoundingBox,f=.8*(a.w/2-5),g=.45*(a.h/2-5);b=a.x+a.w/2;var a=a.y+a.h/2,k=b-f,f=b+f,h=a-g,g=a+g;return[{FillColor:e?"#000000":d?lucid.color.darken(c.FillColor,.25):"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:k,y:h},{Action:"line",x:f,y:h},{Action:"line",x:f,y:g},{Action:"line",x:k,y:g},{Action:"close"}]},{StrokeColor:e?"#ffffff":c.LineColor,
LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:k,y:h},{Action:"line",x:b,y:a},{Action:"line",x:f,y:h}]}]},wa=function(c){function e(a,b,c,d,f){var e=Math.cos(b);b=Math.sin(b);return[{Action:"move",x:d+e*a,y:f+b*a},{Action:"line",x:d+e*(a-c),y:f+b*(a-c)}]}for(var b=c.BoundingBox,d=b.x+b.w/2,a=b.y+b.h/2,b=.8*(Math.min(b.w,b.h)/2-5),f=2*b,g=.2*b,k=2*Math.PI,h=Math.PI/6,f=[{Action:"move",x:d+b,y:a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(d-b,a-b,f,f,0,k)},{Action:"close"}],
l=0;l<k;l+=h)f=f.concat(e(b,l,g,d,a));f=f.concat([{Action:"move",x:d,y:a},{Action:"line",x:d,y:a-.6*b},{Action:"move",x:d,y:a},{Action:"line",x:d+.35*b,y:a}]);return[{FillColor:"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:f}]},da=function(c,e,b){var d=c.BoundingBox;if(b)b=d.x+.3*d.w,a=d.y+.2*d.h,f=.8*(.37*d.w-5),d=.6*(.3*d.h-5);else{b=d.x+d.w/2;var a=d.y+d.h/2,f=.8*(d.w/2-5),d=.6*(d.h/2-5)}return[{FillColor:e?"#000000":"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,
Actions:[{Action:"move",x:b-f,y:a-.5*d},{Action:"line",x:b+.4*f,y:a-.5*d},{Action:"line",x:b+.4*f,y:a-d},{Action:"line",x:b+f,y:a},{Action:"line",x:b+.4*f,y:a+d},{Action:"line",x:b+.4*f,y:a+.5*d},{Action:"line",x:b-f,y:a+.5*d},{Action:"close"}]}]},la=function(c,e,b,d){var a=1;void 0!==b&&b&&(a=.4);d?(b=d.w/2,a=.9*(d.h/2-5*a)):(d=c.BoundingBox,b=.75*(d.w/2-5*a),a=.5*(d.h/2-5*a));var f=d.x+d.w/2;d=d.y+d.h/2;return[{FillColor:e?"#000000":"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,
Actions:[{Action:"move",x:f,y:d},{Action:"line",x:f+b,y:d-a},{Action:"line",x:f+b,y:d+a},{Action:"line",x:f,y:d},{Action:"line",x:f,y:d+a},{Action:"line",x:f-b,y:d},{Action:"line",x:f,y:d-a},{Action:"close"}]}]},qa=function(c,e){var b=c.BoundingBox,d=[{StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+.8*b.w,y:b.y+.5*b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+.2*b.w,b.y+.2*b.h,.6*b.w,.6*b.h,0,2*Math.PI)},{Action:"close"}]}];e&&d.push({StrokeColor:c.LineColor,
LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+.75*b.w,y:b.y+.5*b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+.25*b.w,b.y+.25*b.h,.5*b.w,.5*b.h,0,2*Math.PI)},{Action:"close"}]});d.push({FillColor:"#ffffff",StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:b.x+.5*b.w,y:b.y+.3*b.h},{Action:"line",x:b.x+.3*b.w,y:b.y+.45*b.h},{Action:"line",x:b.x+.36*b.w,y:b.y+.65*b.h},{Action:"line",x:b.x+.64*b.w,y:b.y+.65*b.h},{Action:"line",x:b.x+.7*b.w,
y:b.y+.45*b.h},{Action:"close"}]});return d},Z=function(c,e){return[{StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:e.x,y:e.y},{Action:"line",x:e.x+e.w,y:e.y},{Action:"line",x:e.x+e.w,y:e.y+e.h},{Action:"line",x:e.x,y:e.y+e.h},{Action:"close"},{Action:"move",x:e.x+.5*e.w,y:e.y+.18*e.h},{Action:"line",x:e.x+.5*e.w,y:e.y+.82*e.h},{Action:"move",x:e.x+.18*e.w,y:e.y+.5*e.h},{Action:"line",x:e.x+.82*e.w,y:e.y+.5*e.h}]}]},aa=function(c,e){return[{FillColor:"#000000",
StrokeColor:c.LineColor,LineWidth:c.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:e.x,y:e.y},{Action:"line",x:e.x+.225*e.w,y:e.y},{Action:"line",x:e.x+.225*e.w,y:e.y+e.h},{Action:"line",x:e.x,y:e.y+e.h},{Action:"close"},{Action:"move",x:e.x+.3875*e.w,y:e.y},{Action:"line",x:e.x+.6125*e.w,y:e.y},{Action:"line",x:e.x+.6125*e.w,y:e.y+e.h},{Action:"line",x:e.x+.3875*e.w,y:e.y+e.h},{Action:"close"},{Action:"move",x:e.x+.775*e.w,y:e.y},{Action:"line",x:e.x+e.w,y:e.y},{Action:"line",x:e.x+e.w,y:e.y+
e.h},{Action:"line",x:e.x+.775*e.w,y:e.y+e.h},{Action:"close"}]}]};lucid.line.addEndpointStyles("bpmn",{"BPMN Conditional":function(c,e,b,d,a,f){b={StrokeColor:b,LineWidth:d,FillColor:"#ffffff",NoRounding:!0,Actions:[]};d=Math.atan2(e.y,e.x);b.Actions.push({Action:"move",x:c.x,y:c.y});b.Actions.push({Action:"line",x:c.x+10*Math.cos(d+.75*Math.PI),y:c.y+10*Math.sin(d+.75*Math.PI)});b.Actions.push({Action:"line",x:c.x-15*e.x,y:c.y-15*e.y});b.Actions.push({Action:"line",x:c.x+10*Math.cos(d-.75*Math.PI),
y:c.y+10*Math.sin(d-.75*Math.PI)});b.Actions.push({Action:"close"});return[b]},"BPMN Default":function(c,e,b,d,a,f){b={StrokeColor:b,LineWidth:d,FillColor:"#ffffff",NoRounding:!0,Actions:[]};d=Math.atan2(e.y,e.x);b.Actions.push({Action:"move",x:c.x+10*Math.cos(d+1.25*Math.PI)-15*e.x,y:c.y+10*Math.sin(d+1.25*Math.PI)-15*e.y});b.Actions.push({Action:"line",x:c.x+10*Math.cos(d-1.75*Math.PI)-15*e.x,y:c.y+10*Math.sin(d-1.75*Math.PI)-15*e.y});return[b]}});(function(){function c(b){var a=lucid.plugin.getProperty(b,
"rowHeights",!0),c=lucid.plugin.getProperty(b,"BoundingBox");if(a){for(var e=0,k=0;k<a.length;++k)e+=a[k];if(c){var h=Math.max(c.h-e,30);lucid.plugin.setProperty(b,"midSectionHeight",h,!0)}}return h}function e(d){function a(a,b){var c=lucid.text.getSize(d,a);return Math.round(Math.max(b,c&&c.h+10||b))}var f=[],e=0,k=0,h=lucid.plugin.getProperty(d,"Fields"),l=lucid.plugin.getProperty(d,"MPChecked"),m=lucid.plugin.getProperty(d,"BoundingBox"),k=c(d),p=a("Name",30),e=e+p;f.push(p);for(p=1;p<=h;p++){var n=
0,q=a(b[0].name+p,30);l&&"checked"==l[p]&&(q+=20);q>n&&(n=q);f.push(n);e+=n}for(h=0;h<f.length;h++);h=0;for(l=2;l<f.length;++l)h+=f[l];e+=k;lucid.plugin.setMinHeight(d,h+120);k=[{x:0,y:(e-h)/e*.5},{x:1,y:(e-h)/e*.5}];lucid.plugin.setProperty(d,"rowHeights",f,!0);lucid.plugin.setProperty(d,"totalHeight",e,!0);lucid.plugin.setProperty(d,"linkPoints",k,!0);m&&m.h!=e&&(m.h=e,lucid.plugin.setProperty(d,"BoundingBox",m));lucid.plugin.refreshBlockView(d);return f}var b=[{name:"Participant",align:"Center",
bb:function(b,a,c){return{x:b.x+10,y:b.y+c,w:b.w-20,h:a}}}];lucid.plugin.initBlockClass({className:"BPMNChoreography",name:"Choreography",searchKeywords:["bpmn","business","choreography"],defaultSize:{w:200,h:140},minHeight:100,minWidth:160,onCreate:function(b){B();lucid.plugin.editBlockTextArea(b,"Name")},onInit:function(d){function a(){h&&(clearTimeout(h),h=null);h=setTimeout(function(){X(d,!1,{})},25)}function f(){0==l&&g(d);l++;setTimeout(function(){l--;0==l&&g(d)},25)}function g(a,c,d){c=lucid.plugin.getBlockTextAreas(a);
for(var f=b.length,g=1;g<=d;g++)for(var h=0;h<f;h++)lucid.array.contains(c,b[h].name+g)||k(h,g);e(a)}function k(c,e){var g=b[c].name,h=null,h=1==e?{align:"center"}:lucid.text.getStyle(d,g+"1");lucid.plugin.addBlockTextArea(d,{id:g+e,value:lucid.text.restyle(g,h),getBoundingBox:function(a){if(e>lucid.plugin.getProperty(d,"Fields"))return null;var f=lucid.plugin.getProperty(d,"rowHeights",!0),g;g=lucid.plugin.getProperty(d,"midSectionHeight",!0)||70;for(var h=0;h<e;h++)g+=f[h];var h=b[c].bb,k=lucid.plugin.getProperty(d,
"MPChecked"),f=k&&"checked"==k[e]?f[e]-20:f[e];return h&&h(a,f,g)||null},onFocus:function(){lucid.plugin.setProperty(d,"selectedRow",e,!0)},align:"center"});lucid.plugin.hookPropertyPreSave(d,g+e,function(a){lucid.plugin.getProperty(d,"remap")&&L(d);return a});lucid.plugin.hookPropertyPostSave(d,g+e,function(b,c){b!=c&&(lucid.text.getStyleFromContent(c)&&lucid.plugin.updateBlockTextArea(d,g+e,{align:"center"}),f(),lucid.plugin.getProperty(d,"remap")&&a())})}lucid.plugin.setProperty(d,"DisableAutoLink",
!0);for(var h=null,l=0,m=[],p=0;p<b.length;p++)m.push(b[p].name);lucid.plugin.setProperty(d,"fieldNames",m,!0);lucid.plugin.registerProperty(d,"Fields",1,null,function(a,b){g(d,a,b)});lucid.plugin.registerProperty(d,"MPChecked");lucid.plugin.registerProperty(d,"bpmnChoreographyType",0);lucid.plugin.registerProperty(d,"initiatingMessage",0);lucid.plugin.registerProperty(d,"responseMessage",0);lucid.plugin.addBlockTextArea(d,{id:"Name",value:"Participant A",getBoundingBox:function(a){var b=lucid.plugin.getProperty(d,
"rowHeights",!0);return{x:a.x+10,y:a.y,w:a.w-20,h:b?b[0]:30}},onFocus:function(){lucid.plugin.setProperty(d,"selectedRow",null,!0)}});lucid.plugin.addBlockTextArea(d,{id:"TaskName",value:"Task",getBoundingBox:function(a){var b=lucid.plugin.getProperty(d,"rowHeights",!0),c=b?b[0]:30,b=a.h-lucid.array.reduce(b||[],function(a,b){return a+b},0);return{x:a.x+10,y:a.y+c,w:a.w-20,h:b}},onFocus:function(){lucid.plugin.setProperty(d,"selectedRow",null,!0)}});lucid.plugin.hookPropertyPreSave(d,"Name",function(a){lucid.plugin.getProperty(d,
"remap")&&L(d);return a});lucid.plugin.hookPropertyPostSave(d,"Name",function(b,c){b!=c&&(f(),lucid.plugin.getProperty(d,"remap")&&a())});lucid.plugin.hookPropertyPostSave(d,"BoundingBox",function(a,b){c(d);var f=lucid.plugin.getProperty(d,"rowHeights",!0);if(f){for(var e=0,g=2;g<f.length;++g)e+=f[g];lucid.plugin.setProperty(d,"linkPoints",[{x:0,y:(b.h-e)/b.h*.5},{x:1,y:(b.h-e)/b.h*.5}],!0);L(d);X(d)}})},getLinkPoints:function(b){return(b=lucid.plugin.getProperty(b,"linkPoints",!0))?(b.push({x:.5,
y:1}),b.push({x:.5,y:0}),b):[]},hitTest:function(b,a){var c=lucid.plugin.getProperty(b,"Rotation"),e=lucid.plugin.getProperty(b,"BoundingBox"),c=lucid.math.Point.rotate(a,lucid.math.Box.center(e),-c);lucid.plugin.getProperty(b,"FlipY")&&(c=lucid.math.Point.rotate(c,lucid.math.Box.center(e),Math.PI));var k=ia(b,a);return 0<k?{onClick:function(){lucid.plugin.setProperty(b,"selectedRow",k,!0)}}:{onClick:function(){lucid.plugin.setProperty(b,"selectedRow",null,!0)}}},preferredTextArea:function(b){var a=
lucid.plugin.getProperty(b,"selectedRow",!0);b=lucid.plugin.getProperty(b,"fieldNames",!0);if(a&&b.length)return b[0]+a},spatialControls:function(b){var a=lucid.plugin.getProperty(b,"selectedRow",!0);if(a){var c=W(b),e=c[a];if(e)return[{location:function(){return e},moved:function(c,f){var e=ia(b,c);0<e&&e!==a?f?(lucid.plugin.setProperty(b,"potentialSwitchRow",null,!0),ra(b,a,e),lucid.plugin.setProperty(b,"selectedRow",e,!0)):lucid.plugin.setProperty(b,"potentialSwitchRow",e,!0):lucid.plugin.setProperty(b,
"potentialSwitchRow",null,!0)},path:function(){var a=lucid.math.Box.combine(c.slice(1));return[lucid.math.Box.getRelativePoint(a,.5,0),lucid.math.Box.getRelativePoint(a,.5,1)]},color:"none"}]}},getRenderData:function(b,a,c){"sample"===a&&(b.LineWidth=1);for(var e=b.BoundingBox,k=b.rowHeights&&b.rowHeights[0]||30,h=0,k=[{FillColor:b.FillColor,Actions:[{Action:"move",x:e.x,y:e.y},{Action:"line",x:e.x+e.w,y:e.y},{Action:"line",x:e.x+e.w,y:e.y+e.h},{Action:"line",x:e.x,y:e.y+e.h},{Action:"close"}]},{StrokeColor:b.LineColor,
LineWidth:2==b.bpmnChoreographyType?b.LineWidth+2:b.LineWidth,Actions:[{Action:"move",x:e.x,y:e.y},{Action:"line",x:e.x+e.w,y:e.y},{Action:"line",x:e.x+e.w,y:e.y+e.h},{Action:"line",x:e.x,y:e.y+e.h},{Action:"close"}]},{StrokeColor:b.LineColor,LineWidth:2==b.bpmnChoreographyType?b.LineWidth+2:b.LineWidth,Actions:[{Action:"move",x:e.x,y:e.y+("sample"==a?4:k)},{Action:"line",x:e.x+e.w,y:e.y+("sample"==a?4:k)}]}],l=b.rowHeights.length-1;0<l;--l)if(h+=b.rowHeights[l],k=k.concat([{StrokeColor:b.LineColor,
LineWidth:2==b.bpmnChoreographyType?b.LineWidth+2:b.LineWidth,Actions:[{Action:"move",x:e.x,y:e.y+e.h-("sample"==a?4:h)},{Action:"line",x:e.x+e.w,y:e.y+e.h-("sample"==a?4:h)}]}]),b.MPChecked&&"checked"==b.MPChecked[l])var m={h:b.rowHeights[l]/2-5,w:b.rowHeights[l]/2,x:e.x+.5*e.w-b.rowHeights[l]/4,y:e.y+e.h-h+b.rowHeights[l]/4+15},k=k.concat(N(b,1,m));1==b.bpmnChoreographyType&&(l=1,"sample"===a&&(l=.4),m={h:30*l,w:30*l,x:e.x+.5*e.w-15*l,y:1==l?e.y+b.rowHeights[0]+b.midSectionHeight-35:e.y+20},k=k.concat(N(b,
2,m)));1==b.initiatingMessage&&(m={h:50,w:50,x:e.x+.5*e.w-25,y:e.y-70},k=k.concat(lucid.math.dashLine([{StrokeColor:b.LineColor,LineWidth:2,Actions:[{Action:"move",x:e.x+.5*e.w,y:e.y},{Action:"line",x:e.x+.5*e.w,y:e.y-50}]}],[2,5])),k=k.concat(N(b,3,m)));1==b.responseMessage&&(m={h:50,w:50,x:e.x+.5*e.w-25,y:e.y+e.h+20},k=k.concat(lucid.math.dashLine([{StrokeColor:b.LineColor,LineWidth:2,Actions:[{Action:"move",x:e.x+.5*e.w,y:e.y+e.h},{Action:"line",x:e.x+.5*e.w,y:e.y+e.h+50}]}],[2,5])),k=k.concat(N(b,
4,m)));k.splice(1,0,{FillColor:lucid.color.darken(b.FillColor,.25),Actions:[{Action:"move",x:e.x,y:e.y+e.h-h},{Action:"line",x:e.x+e.w,y:e.y+e.h-h},{Action:"line",x:e.x+e.w,y:e.y+e.h},{Action:"line",x:e.x,y:e.y+e.h},{Action:"close"}]});b.selectedRow&&"pdf"!=a&&(a=W(c),c=a[b.selectedRow],k.push({StrokeColor:"#29aae1",LineWidth:2,NoRounding:!0,Actions:[{Action:"move",x:c.x+b.LineWidth/2,y:c.y+b.LineWidth/2},{Action:"line",x:c.x+c.w-b.LineWidth/2,y:c.y+b.LineWidth/2},{Action:"line",x:c.x+c.w-b.LineWidth/
2,y:c.y+c.h-b.LineWidth/2},{Action:"line",x:c.x+b.LineWidth/2,y:c.y+c.h-b.LineWidth/2},{Action:"close"}]}),b.potentialSwitchRow&&(a=a[b.potentialSwitchRow],k.push({StrokeColor:"#29aae1",LineWidth:5,NoRounding:!0,Actions:[{Action:"move",x:a.x+b.LineWidth/2,y:a.y+(b.potentialSwitchRow<b.selectedRow?0:a.h)},{Action:"line",x:a.x+a.w-b.LineWidth/2,y:a.y+(b.potentialSwitchRow<b.selectedRow?0:a.h)}]})));return k}})})();lucid.plugin.initBlockClass(ka());lucid.plugin.initBlockClass(ka(!0));var A=null,O=null,
Q=null;lucid.plugin.onActivate(function(){lucid.line.enableEndpointStyles("bpmn");lucid.plugin.allowShadowSharing("BPMNActivity",!0);lucid.plugin.allowShadowSharing("BPMNEvent",!0);lucid.plugin.allowShadowSharing("BPMNChoreography",!0);lucid.plugin.allowShadowSharing("BPMNConversation",!0);lucid.plugin.allowShadowSharing("BPMNGateway",!0);lucid.plugin.allowShadowSharing("BPMNData",!0);lucid.plugin.allowShadowSharing("BPMNDataStore",!0);lucid.plugin.allowShadowSharing("BPMNAdvancedPoolBlock",!0);lucid.plugin.allowShadowSharing("BPMNAdvancedPoolBlockRotated",
!0);lucid.plugin.allowShadowSharing("BPMNBlackPool",!0)});lucid.plugin.onDeactivate(function(){lucid.line.disableEndpointStyles("bpmn")});lucid.plugin.createToolGroups({"BPMN 2.0":[{className:"BPMNActivity",variant:"Task"},{className:"BPMNActivity",variant:"Transaction"},{className:"BPMNActivity",variant:"Event Sub-Process"},{className:"BPMNActivity",variant:"Call"},{className:"BPMNEvent",variant:"Start Event"},{className:"BPMNEvent",variant:"Intermediate Event"},{className:"BPMNEvent",variant:"End Event"},
"BPMNChoreography",{className:"BPMNConversation",variant:"Conversation"},"BPMNGateway","BPMNData","BPMNDataStore","BPMNAdvancedPoolBlock","BPMNAdvancedPoolBlockRotated","BPMNBlackPool"]});lucid.plugin.createExchangeGroup(["BPMNData"]);lucid.plugin.createExchangeGroup(["BPMNGateway"]);lucid.plugin.createExchangeGroup(["BPMNEvent"]);G="Task;Transaction;Event Sub-Process;Call;Start Event;Intermediate Event;End Event;BPMNChoreography;Conversation;BPMNGateway;BPMNData;BPMNDataStore".split(";");lucid.plugin.createNextBlockGroup(G,
"BPMNActivity BPMNEvent BPMNChoreography BPMNConversation BPMNGateway BPMNData BPMNDataStore".split(" "));lucid.plugin.createNextBlockGroup(G)})();
//# sourceMappingURL=/js/plugins/v2/source-maps/bpmn2.js.map
};
